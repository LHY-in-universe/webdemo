<!DOCTYPE html>
<html lang="zh-CN" data-i18n-title="ai.dashboard.server.title">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœåŠ¡å™¨æ§åˆ¶å°</title>
    <!-- ==================== é˜²ç™½é—ªè„šæœ¬ ==================== -->
    <script>
        (function() {
            'use strict';
            try {
                // è·å–ä¿å­˜çš„ä¸»é¢˜æˆ–ç³»ç»Ÿåå¥½
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = savedTheme || (prefersDark ? 'dark' : 'light');
                
                // ç«‹å³è®¾ç½®ä¸»é¢˜å±æ€§åˆ°htmlå…ƒç´ 
                document.documentElement.setAttribute('data-theme', theme);
                
                // ç«‹å³è®¾ç½®åŸºç¡€èƒŒæ™¯è‰²é˜²æ­¢ç™½é—ª
                if (theme === 'dark') {
                    document.documentElement.style.backgroundColor = '#1f2937';
                    document.documentElement.style.color = '#f9fafb';
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.style.backgroundColor = '#ffffff';
                    document.documentElement.style.color = '#1f2937';
                    document.documentElement.classList.remove('dark');
                }
                
                console.log('ğŸ¨ é˜²ç™½é—ª: ä¸»é¢˜å·²è®¾ç½®ä¸º', theme);
                
            } catch (error) {
                console.warn('âš ï¸ é˜²ç™½é—ªè„šæœ¬å¤±è´¥:', error);
                // é™çº§åˆ°æ·±è‰²ä¸»é¢˜ä½œä¸ºé»˜è®¤
                document.documentElement.setAttribute('data-theme', 'dark');
                document.documentElement.style.backgroundColor = '#1f2937';
                document.documentElement.style.color = '#f9fafb';
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    
    <!-- ==================== å…³é”®CSSé¢„åŠ è½½ ==================== -->
    <style>
        /* é˜²æ­¢ç™½é—ªçš„å…³é”®æ ·å¼ */
        html[data-theme="dark"] {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
        }
        html[data-theme="light"] {
            background-color: #ffffff !important;
            color: #1f2937 !important;
        }
        
        /* ç¡®ä¿bodyç»§æ‰¿æ­£ç¡®çš„èƒŒæ™¯ */
        html[data-theme="dark"] body {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
        }
        html[data-theme="light"] body {
            background-color: #ffffff !important;
            color: #1f2937 !important;
        }
        
        /* å¹³æ»‘è¿‡æ¸¡ */
        html, body {
            transition: background-color 0.3s ease, color 0.3s ease !important;
        }
    </style>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../../shared/css/unified-styles.css?v=1756673001">
    
    <link rel="stylesheet" href="../assets/ai-styles.css?v=20250901">
    <link rel="stylesheet" href="../assets/server-dashboard-styles.css?v=20250901">
    <style>
        /* AIæœåŠ¡å™¨æ§åˆ¶å°æ·±è‰²æ¨¡å¼æ ·å¼ */
        [data-theme="dark"] .module-card {
            background: rgba(31, 41, 55, 0.8) !important;
            border: 1px solid rgba(75, 85, 99, 0.4) !important;
        }
        
        [data-theme="dark"] .bg-blue-50 {
            background: rgba(59, 130, 246, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-green-50 {
            background: rgba(34, 197, 94, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-orange-50 {
            background: rgba(249, 115, 22, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-yellow-50 {
            background: rgba(245, 158, 11, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-gray-50 {
            background: rgba(55, 65, 81, 0.6) !important;
        }
        
        /* ä¿®å¤æŒ‰é’®èƒŒæ™¯ */
        [data-theme="dark"] .btn-module-primary {
            background: rgba(59, 130, 246, 0.8) !important;
            color: #ffffff !important;
            border: 1px solid rgba(59, 130, 246, 0.4) !important;
        }
        
        [data-theme="dark"] .btn-module-secondary {
            background: rgba(55, 65, 81, 0.8) !important;
            color: #d1d5db !important;
            border: 1px solid rgba(107, 114, 128, 0.3) !important;
        }
        
        [data-theme="dark"] .btn-mini.primary {
            background: rgba(59, 130, 246, 0.8) !important;
            color: #ffffff !important;
            border: none !important;
        }
        
        [data-theme="dark"] .btn-mini.secondary {
            background: rgba(55, 65, 81, 0.8) !important;
            color: #d1d5db !important;
            border: none !important;
        }
        
        /* ä¿®å¤å¾½ç« èƒŒæ™¯ */
        [data-theme="dark"] .bg-green-100 {
            background: rgba(34, 197, 94, 0.2) !important;
            color: #86efac !important;
        }
        
        [data-theme="dark"] .bg-orange-100 {
            background: rgba(249, 115, 22, 0.2) !important;
            color: #fdba74 !important;
        }
        
        [data-theme="dark"] .bg-blue-100 {
            background: rgba(59, 130, 246, 0.2) !important;
            color: #93c5fd !important;
        }
        
        [data-theme="dark"] .bg-yellow-100 {
            background: rgba(245, 158, 11, 0.2) !important;
            color: #fbbf24 !important;
        }
        
        [data-theme="dark"] .bg-gray-100 {
            background: rgba(75, 85, 99, 0.4) !important;
            color: #d1d5db !important;
        }
        
        /* ä¿®å¤æ–‡å­—é¢œè‰² */
        [data-theme="dark"] .text-green-800 {
            color: #86efac !important;
        }
        
        [data-theme="dark"] .text-orange-800 {
            color: #fdba74 !important;
        }
        
        [data-theme="dark"] .text-blue-800 {
            color: #93c5fd !important;
        }
        
        [data-theme="dark"] .text-yellow-800 {
            color: #fbbf24 !important;
        }
        
        [data-theme="dark"] .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .text-blue-600 {
            color: #93c5fd !important;
        }
        
        /* ä¿®å¤è¿›åº¦æ¡ */
        [data-theme="dark"] .bg-gray-200 {
            background: rgba(75, 85, 99, 0.6) !important;
        }
        
        /* æµ…è‰²æ¨¡å¼æŒ‰é’®æ ·å¼ */
        .btn-module-primary {
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .btn-module-secondary {
            border: 1px solid rgba(107, 114, 128, 0.2);
        }
        
        /* ä¿®å¤æ¨¡æ€æ¡† */
        .modal-container {
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        [data-theme="dark"] .modal-container {
            background: rgba(31, 41, 55, 0.95) !important;
            border: 1px solid rgba(75, 85, 99, 0.4) !important;
        }
        
        [data-theme="dark"] .modal-header {
            background: rgba(55, 65, 81, 0.8) !important;
            border-bottom: none !important;
        }
        
        [data-theme="dark"] .modal-title {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] .modal-close {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .modal-close:hover {
            color: #f9fafb !important;
        }
    </style>
</head>
<body class="module-background min-h-screen theme-transition">
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar fixed top-0 left-0 right-0 z-40 fade-in-up">
        <div class="max-w-7xl mx-auto flex items-center justify-between px-6">
            <div class="navbar-brand">
                <span data-i18n="ai.dashboard.server.title">æœåŠ¡å™¨æ§åˆ¶å°</span>
            </div>
            
            <div class="navbar-nav flex items-center gap-4">
                <span id="userInfo" class="text-sm text-gray-600"></span>
                <button class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
                    <span>ğŸŒ™</span>
                </button>
                <button class="language-toggle" title="åˆ‡æ¢è¯­è¨€">EN</button>
                <button onclick="logout()" class="btn-secondary text-sm btn-click" data-i18n="common.logout">é€€å‡ºç™»å½•</button>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="pt-20 pb-8">
        <div class="max-w-7xl mx-auto px-6">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
                    <span data-i18n="ai.dashboard.server.title">æœåŠ¡å™¨æ§åˆ¶å°</span>
                </h1>
                <p class="text-gray-600 dark:text-gray-300 mt-2">
                    <span data-i18n="ai.dashboard.server.subtitle">ç®¡ç†è”é‚¦å­¦ä¹ æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è¿æ¥</span>
                </p>
            </div>

            <!-- ç³»ç»ŸçŠ¶æ€æ¦‚è§ˆ -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="module-card rounded-xl cursor-pointer hover:scale-105 transition-transform fade-in-up delay-1 card-hover btn-click" onclick="viewSystemStatus()">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                                <span data-i18n="ai.dashboard.server.systemStatus">ç³»ç»ŸçŠ¶æ€</span>
                            </h3>
                            <p class="text-2xl font-bold text-green-600" data-i18n="ai.dashboard.server.online">åœ¨çº¿</p>
                            <p class="text-sm text-gray-500" data-i18n="ai.dashboard.server.uptime">è¿è¡Œæ—¶é—´: 15å¤©</p>
                        </div>
                        <div class="text-4xl">ğŸ’»</div>
                    </div>
                </div>

                <div class="module-card rounded-xl cursor-pointer hover:scale-105 transition-transform fade-in-up delay-2 card-hover btn-click" onclick="viewConnectedClients()">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                                <span data-i18n="ai.dashboard.server.connectedClients">è¿æ¥å®¢æˆ·ç«¯</span>
                            </h3>
                            <p class="text-2xl font-bold text-blue-600">8</p>
                            <p class="text-sm text-gray-500" data-i18n="ai.dashboard.server.clientStatus">6åœ¨çº¿, 1ç©ºé—², 1ç¦»çº¿</p>
                        </div>
                        <div class="text-4xl">ğŸ‘¥</div>
                    </div>
                </div>

                <div class="module-card rounded-xl cursor-pointer hover:scale-105 transition-transform fade-in-up delay-3 card-hover btn-click" onclick="viewActiveSessions()">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                                <span data-i18n="ai.dashboard.server.activeSessions">æ´»è·ƒä¼šè¯</span>
                            </h3>
                            <p class="text-2xl font-bold text-purple-600">3</p>
                            <p class="text-sm text-gray-500" data-i18n="ai.dashboard.server.sessionStatus">1è®­ç»ƒä¸­, 1ç­‰å¾…, 1MPC</p>
                        </div>
                        <div class="text-4xl">ğŸ”„</div>
                    </div>
                </div>

                <div class="module-card rounded-xl cursor-pointer hover:scale-105 transition-transform fade-in-up delay-4 card-hover btn-click" onclick="viewPendingRequests()">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
                                <span data-i18n="ai.dashboard.server.pendingRequests">å¾…å®¡æ ¸ç”³è¯·</span>
                            </h3>
                            <p class="text-2xl font-bold text-orange-600">5</p>
                            <p class="text-sm text-gray-500" data-i18n="ai.dashboard.server.needsReview">éœ€è¦å®¡æ ¸å¤„ç†</p>
                        </div>
                        <div class="text-4xl">ğŸ“‹</div>
                    </div>
                </div>
            </div>

            <!-- ä¸»è¦åŠŸèƒ½åŒº -->
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8 mb-8">
                <!-- æ¨¡å‹ç®¡ç† -->
                <div class="module-card rounded-xl fade-in-up delay-5">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.modelManagement">æ¨¡å‹ç®¡ç†</span>
                        </h2>
                        <button onclick="viewModelManagementDetails()" class="btn-module-secondary text-sm btn-click">
                            <span data-i18n="ai.dashboard.server.viewDetails">æŸ¥çœ‹è¯¦æƒ…</span>
                        </button>
                    </div>

                    <!-- å½“å‰æ´»è·ƒæ¨¡å‹ -->
                    <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl mb-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-blue-600 dark:text-blue-400 font-medium" data-i18n="ai.dashboard.server.currentActiveModel">å½“å‰æ´»è·ƒæ¨¡å‹</p>
                                <p class="font-semibold text-gray-900 dark:text-white" id="currentModelName" data-i18n="ai.dashboard.server.cnnImageClassificationModel">CNNå›¾åƒåˆ†ç±»æ¨¡å‹ v2.1</p>
                            </div>
                            <button onclick="openModelSelectionModal()" class="btn-module-primary text-sm btn-click">
                                <span data-i18n="ai.dashboard.server.switchModel">åˆ‡æ¢æ¨¡å‹</span>
                            </button>
                        </div>
                    </div>

                    <!-- æ¨¡å‹åˆ—è¡¨ -->
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <span class="font-medium text-gray-900 dark:text-white" data-i18n="ai.dashboard.server.cnnImageModel">CNNå›¾åƒåˆ†ç±»æ¨¡å‹</span>
                                <span class="text-sm px-2 py-1 bg-green-100 text-green-800 rounded" data-i18n="ai.dashboard.server.active">æ´»è·ƒ</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="viewModelDetails('model1')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.details">è¯¦æƒ…</button>
                                <button onclick="editModel('model1')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.edit">ç¼–è¾‘</button>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
                                <span class="font-medium text-gray-900 dark:text-white" data-i18n="ai.dashboard.server.lstmTextModel">LSTMæ–‡æœ¬åˆ†ææ¨¡å‹</span>
                                <span class="text-sm px-2 py-1 bg-gray-100 text-gray-600 rounded" data-i18n="ai.dashboard.server.inactive">éæ´»è·ƒ</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="activateModel('model2')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.activate">æ¿€æ´»</button>
                                <button onclick="editModel('model2')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.edit">ç¼–è¾‘</button>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
                                <span class="font-medium text-gray-900 dark:text-white" data-i18n="ai.dashboard.server.mlpRegressionModel">MLPå›å½’é¢„æµ‹æ¨¡å‹</span>
                                <span class="text-sm px-2 py-1 bg-gray-100 text-gray-600 rounded" data-i18n="ai.dashboard.server.inactive">éæ´»è·ƒ</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="activateModel('model3')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.activate">æ¿€æ´»</button>
                                <button onclick="deleteModel('model3')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.delete">åˆ é™¤</button>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-xl">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                <span class="font-medium text-gray-900 dark:text-white" data-i18n="ai.dashboard.server.recommendationSystemModel">æ¨èç³»ç»Ÿæ¨¡å‹</span>
                                <span class="text-sm px-2 py-1 bg-yellow-100 text-yellow-800 rounded" data-i18n="ai.dashboard.server.draft">è‰ç¨¿</span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editModel('model4')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.refine">å®Œå–„</button>
                                <button onclick="deleteModel('model4')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.delete">åˆ é™¤</button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-600">
                        <button onclick="openCreateModelModal()" class="btn-module-primary w-full btn-click">
                            â• <span data-i18n="ai.dashboard.server.createNewModel">åˆ›å»ºæ–°æ¨¡å‹</span>
                        </button>
                    </div>
                </div>

                <!-- ç½‘ç»œæ€§èƒ½ç›‘æ§ -->
                <div class="module-card rounded-xl fade-in-up delay-5">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.networkPerformance">ç½‘ç»œæ€§èƒ½ç›‘æ§</span>
                        </h2>
                        <button onclick="viewNetworkPerformanceDetails()" class="btn-module-secondary text-sm btn-click">
                            <span data-i18n="ai.dashboard.server.viewDetails">æŸ¥çœ‹è¯¦æƒ…</span>
                        </button>
                    </div>

                    <div class="relative h-64 mb-4">
                        <canvas id="networkChart"></canvas>
                    </div>

                    <div class="flex justify-center gap-6">
                        <div class="text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl" style="min-width: 120px; max-width: 140px;">
                            <p class="text-sm text-blue-600 dark:text-blue-400" data-i18n="ai.dashboard.server.currentLatency">å½“å‰å»¶è¿Ÿ</p>
                            <p class="text-2xl font-bold text-blue-800 dark:text-blue-300">45ms</p>
                        </div>
                        <div class="text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-xl" style="min-width: 120px; max-width: 140px;">
                            <p class="text-sm text-green-600 dark:text-green-400" data-i18n="ai.dashboard.server.bandwidthUsage">å¸¦å®½ä½¿ç”¨ç‡</p>
                            <p class="text-2xl font-bold text-green-800 dark:text-green-300">65%</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç®¡ç†åŠŸèƒ½åŒº -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- å¾…å®¡æ ¸è®­ç»ƒç”³è¯· -->
                <div class="module-card rounded-xl cursor-pointer fade-in-up delay-6 card-hover btn-click" onclick="viewPendingTrainingRequests()">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.pendingRequests">å¾…å®¡æ ¸è®­ç»ƒç”³è¯·</span>
                        </h3>
                        <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-sm font-medium">3</span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl max-w-sm mx-auto">
                            <p class="font-medium text-gray-900 dark:text-white text-sm" data-i18n="ai.dashboard.server.imageClassificationFederated">å›¾åƒåˆ†ç±»è”é‚¦è®­ç»ƒ</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.client1Waiting35">client1 â€¢ ç­‰å¾…35åˆ†é’Ÿ</p>
                            <div class="flex gap-2 mt-2 justify-center">
                                <button onclick="approveRequest('req1')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.approve">æ‰¹å‡†</button>
                                <button onclick="rejectRequest('req1')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.reject">æ‹’ç»</button>
                            </div>
                        </div>
                        
                        <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl max-w-sm mx-auto">
                            <p class="font-medium text-gray-900 dark:text-white text-sm" data-i18n="ai.dashboard.server.textAnalysisMPCTraining">æ–‡æœ¬åˆ†æMPCè®­ç»ƒ</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.client2Waiting5">client2 â€¢ ç­‰å¾…5åˆ†é’Ÿ</p>
                            <div class="flex gap-2 mt-2 justify-center">
                                <button onclick="approveRequest('req2')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.approve">æ‰¹å‡†</button>
                                <button onclick="rejectRequest('req2')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.reject">æ‹’ç»</button>
                            </div>
                        </div>

                        <button class="text-sm text-blue-600 hover:text-blue-800 font-medium px-3 py-1 rounded bg-transparent hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors" data-i18n="ai.dashboard.server.viewAllRequests">æŸ¥çœ‹æ‰€æœ‰ç”³è¯· â†’</button>
                    </div>
                </div>

                <!-- æ´»è·ƒè®­ç»ƒä¼šè¯ -->
                <div class="module-card rounded-xl cursor-pointer fade-in-up delay-6 card-hover btn-click" onclick="viewActiveTrainingSessionsDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.activeSessions">æ´»è·ƒè®­ç»ƒä¼šè¯</span>
                        </h3>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-medium">3</span>
                    </div>
                    
                    <div class="space-y-3">
                        <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-xl max-w-sm mx-auto">
                            <p class="font-medium text-gray-900 dark:text-white text-sm" data-i18n="ai.dashboard.server.cnnFaultDetectionTitle">CNNæ•…éšœæ£€æµ‹</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.participants5Progress">5ä¸ªå‚ä¸æ–¹ â€¢ è¿›åº¦ 45%</p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 45%"></div>
                            </div>
                            <div class="flex gap-2 mt-2 justify-center">
                                <button onclick="viewSession('session1')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.view">æŸ¥çœ‹</button>
                                <button onclick="pauseSession('session1')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.pause">æš‚åœ</button>
                            </div>
                        </div>
                        
                        <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl max-w-sm mx-auto">
                            <p class="font-medium text-gray-900 dark:text-white text-sm" data-i18n="ai.dashboard.server.lstmSentimentAnalysisTitle">LSTMæƒ…æ„Ÿåˆ†æ</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.participants2Of4Waiting">2/4ä¸ªå‚ä¸æ–¹ â€¢ ç­‰å¾…ä¸­</p>
                            <div class="flex gap-2 mt-2 justify-center">
                                <button onclick="inviteParticipants('session2')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.invite">é‚€è¯·</button>
                                <button onclick="viewSession('session2')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.view">æŸ¥çœ‹</button>
                            </div>
                        </div>

                        <button class="text-sm text-blue-600 hover:text-blue-800 font-medium px-3 py-1 rounded bg-transparent hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors" data-i18n="ai.dashboard.server.viewAllSessions">æŸ¥çœ‹æ‰€æœ‰ä¼šè¯ â†’</button>
                    </div>
                </div>

                <!-- å®¢æˆ·ç«¯ç®¡ç† -->
                <div class="module-card rounded-xl cursor-pointer fade-in-up delay-6 card-hover btn-click" onclick="viewClientManagementDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.clientManagement">å®¢æˆ·ç«¯ç®¡ç†</span>
                        </h3>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium">4</span>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-xl max-w-xs mx-auto">
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="text-sm font-medium text-gray-900 dark:text-white">client1</span>
                                <span class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.online_status">åœ¨çº¿</span>
                            </div>
                            <div class="flex gap-1">
                                <button onclick="viewClient('client1')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.view">æŸ¥çœ‹</button>
                                <button onclick="kickClient('client1')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.kick">è¸¢å‡º</button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded-xl max-w-xs mx-auto">
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                <span class="text-sm font-medium text-gray-900 dark:text-white">client2</span>
                                <span class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.online_status">åœ¨çº¿</span>
                            </div>
                            <div class="flex gap-1">
                                <button onclick="viewClient('client2')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.view">æŸ¥çœ‹</button>
                                <button onclick="kickClient('client2')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.kick">è¸¢å‡º</button>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl max-w-xs mx-auto">
                            <div class="flex items-center gap-2">
                                <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                                <span class="text-sm font-medium text-gray-900 dark:text-white">client3</span>
                                <span class="text-xs text-gray-600 dark:text-gray-400" data-i18n="ai.dashboard.server.idle">ç©ºé—²</span>
                            </div>
                            <div class="flex gap-1">
                                <button onclick="viewClient('client3')" class="btn-mini primary btn-click" data-i18n="ai.dashboard.server.view">æŸ¥çœ‹</button>
                                <button onclick="removeClient('client3')" class="btn-mini secondary btn-click" data-i18n="ai.dashboard.server.remove">ç§»é™¤</button>
                            </div>
                        </div>

                        <button class="text-sm text-blue-600 hover:text-blue-800 font-medium px-3 py-1 rounded bg-transparent hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors" data-i18n="ai.dashboard.server.viewAllClients">æŸ¥çœ‹æ‰€æœ‰å®¢æˆ·ç«¯ â†’</button>
                    </div>
                </div>
            </div>

            <!-- ç³»ç»Ÿæ—¥å¿— -->
            <div class="mt-8">
                <div class="module-card rounded-xl cursor-pointer fade-in-up delay-6 card-hover btn-click" onclick="viewSystemLogsDetails()">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                            <span data-i18n="ai.dashboard.server.systemLogs">ç³»ç»Ÿæ—¥å¿—</span>
                        </h3>
                        <span class="text-sm text-gray-500" data-i18n="ai.dashboard.server.realTimeUpdates">å®æ—¶æ›´æ–°</span>
                    </div>
                    
                    <div class="bg-black text-green-400 p-4 rounded-xl font-mono text-sm h-32 overflow-y-auto" id="systemLogs">
                        <div data-i18n="ai.dashboard.server.log.clientStatusCheck">[08/22/2025, 9:15:30 AM] å®¢æˆ·ç«¯çŠ¶æ€æ£€æŸ¥å®Œæˆ</div>
                        <div data-i18n="ai.dashboard.server.log.trainingSessionNormal">[08/22/2025, 9:16:45 AM] è®­ç»ƒä¼šè¯æ€§èƒ½æ­£å¸¸</div>
                        <div data-i18n="ai.dashboard.server.log.newTrainingRequest">[08/22/2025, 9:17:12 AM] æ”¶åˆ°æ–°çš„è®­ç»ƒç”³è¯·</div>
                        <div data-i18n="ai.dashboard.server.log.mpcRoundComplete">[08/22/2025, 9:18:01 AM] MPCè®¡ç®—å®Œæˆä¸€è½®</div>
                        <div data-i18n="ai.dashboard.server.log.networkStable">[08/22/2025, 9:18:33 AM] ç½‘ç»œè¿æ¥ç¨³å®š</div>
                        <div data-i18n="ai.dashboard.server.log.dataSyncComplete">[08/22/2025, 9:19:15 AM] æ•°æ®åŒæ­¥å®Œæˆ</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="detailModal" class="modal-overlay hidden">
        <div class="modal-container content-area">
            <div class="modal-header">
                <h3 id="modalTitle" class="modal-title">è¯¦æƒ…</h3>
                <button class="modal-close" onclick="closeModal()">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div id="modalContent" class="modal-content"></div>
            </div>
        </div>
    </div>

    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <button class="homepage-return-btn btn-click" onclick="goHome()" title="è¿”å›ä¸»é¡µ">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
        </svg>
    </button>

    <!-- è„šæœ¬å¼•ç”¨ -->
    <script src="../../shared/js/navigation-unified.js?v=20250902"></script>
    <script src="../../shared/js/theme-manager-unified.js?v=20250827"></script>
    <!-- <script src="../../shared/js/router-unified.js?v=20250827"></script> -->
    <script src="../../shared/js/i18n-manager.js?v=20250901"></script>
    <script src="../assets/server-dashboard-scripts.js?v=20250901"></script>
    
    <!-- Enhanced modal styles for better visibility -->
    <style>
        /* æ·±è‰²æ¨¡å¼ä¸‹æ¨¡æ€æ¡†å†…å¡ç‰‡çš„ç‰¹æ®Šæ ·å¼ */
        [data-theme="dark"] .modal-card-blue {
            background-color: rgba(59, 130, 246, 0.15) !important;
            border: 1px solid rgba(59, 130, 246, 0.3) !important;
        }
        
        [data-theme="dark"] .modal-card-green {
            background-color: rgba(34, 197, 94, 0.15) !important;
            border: 1px solid rgba(34, 197, 94, 0.3) !important;
        }
        
        [data-theme="dark"] .modal-card-indigo {
            background-color: rgba(99, 102, 241, 0.15) !important;
            border: 1px solid rgba(99, 102, 241, 0.3) !important;
        }
        
        [data-theme="dark"] .modal-card-amber {
            background-color: rgba(245, 158, 11, 0.15) !important;
            border: 1px solid rgba(245, 158, 11, 0.3) !important;
        }
        
        [data-theme="dark"] .modal-card-red {
            background-color: rgba(239, 68, 68, 0.15) !important;
            border: 1px solid rgba(239, 68, 68, 0.3) !important;
        }
        
        [data-theme="dark"] .modal-card-yellow {
            background-color: rgba(234, 179, 8, 0.15) !important;
            border: 1px solid rgba(234, 179, 8, 0.3) !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹çš„æ–‡å­—é¢œè‰²è°ƒæ•´ */
        [data-theme="dark"] .modal-text-blue { color: #60a5fa !important; }
        [data-theme="dark"] .modal-text-green { color: #4ade80 !important; }
        [data-theme="dark"] .modal-text-indigo { color: #818cf8 !important; }
        [data-theme="dark"] .modal-text-amber { color: #fbbf24 !important; }
        [data-theme="dark"] .modal-text-red { color: #f87171 !important; }
        [data-theme="dark"] .modal-text-yellow { color: #facc15 !important; }
        
        [data-theme="dark"] .modal-title-blue { color: #93c5fd !important; }
        [data-theme="dark"] .modal-title-green { color: #86efac !important; }
        [data-theme="dark"] .modal-title-indigo { color: #a5b4fc !important; }
        [data-theme="dark"] .modal-title-amber { color: #fcd34d !important; }
        [data-theme="dark"] .modal-title-red { color: #fca5a5 !important; }
        [data-theme="dark"] .modal-title-yellow { color: #fde047 !important; }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹æœåŠ¡å™¨ç•Œé¢å†…éƒ¨å¡ç‰‡çš„èƒŒæ™¯ä¿®å¤ */
        [data-theme="dark"] .bg-blue-50 {
            background-color: rgba(59, 130, 246, 0.1) !important;
            border: 1px solid rgba(59, 130, 246, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-green-50 {
            background-color: rgba(34, 197, 94, 0.1) !important;
            border: 1px solid rgba(34, 197, 94, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-orange-50 {
            background-color: rgba(249, 115, 22, 0.1) !important;
            border: 1px solid rgba(249, 115, 22, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-purple-50 {
            background-color: rgba(147, 51, 234, 0.1) !important;
            border: 1px solid rgba(147, 51, 234, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-yellow-50 {
            background-color: rgba(234, 179, 8, 0.1) !important;
            border: 1px solid rgba(234, 179, 8, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-gray-50 {
            background-color: rgba(75, 85, 99, 0.15) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹æ ‡ç­¾/å¾½ç« é¢œè‰² */
        [data-theme="dark"] .bg-orange-100 {
            background-color: rgba(249, 115, 22, 0.15) !important;
            color: #fed7aa !important;
        }
        
        [data-theme="dark"] .bg-green-100 {
            background-color: rgba(34, 197, 94, 0.15) !important;
            color: #bbf7d0 !important;
        }
        
        [data-theme="dark"] .bg-blue-100 {
            background-color: rgba(59, 130, 246, 0.15) !important;
            color: #dbeafe !important;
        }
        
        [data-theme="dark"] .text-orange-800 { color: #fed7aa !important; }
        [data-theme="dark"] .text-green-800 { color: #bbf7d0 !important; }
        [data-theme="dark"] .text-blue-800 { color: #dbeafe !important; }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹è¿›åº¦æ¡èƒŒæ™¯ */
        [data-theme="dark"] .bg-gray-200 {
            background-color: rgba(75, 85, 99, 0.3) !important;
        }
        
        /* å¼ºåˆ¶æ·±è‰²æ¨¡å¼æ ·å¼ - æœ€é«˜ä¼˜å…ˆçº§ */
        html[data-theme="dark"] .bg-blue-50,
        html[data-theme="dark"] body .bg-blue-50,
        [data-theme="dark"] html .bg-blue-50,
        [data-theme="dark"] body .bg-blue-50 {
            background-color: rgba(59, 130, 246, 0.15) !important;
            border: 1px solid rgba(59, 130, 246, 0.3) !important;
        }
        
        html[data-theme="dark"] .bg-green-50,
        html[data-theme="dark"] body .bg-green-50,
        [data-theme="dark"] html .bg-green-50,
        [data-theme="dark"] body .bg-green-50 {
            background-color: rgba(34, 197, 94, 0.15) !important;
            border: 1px solid rgba(34, 197, 94, 0.3) !important;
        }
        
        html[data-theme="dark"] .bg-yellow-50,
        html[data-theme="dark"] body .bg-yellow-50,
        [data-theme="dark"] html .bg-yellow-50,
        [data-theme="dark"] body .bg-yellow-50 {
            background-color: rgba(234, 179, 8, 0.15) !important;
            border: 1px solid rgba(234, 179, 8, 0.3) !important;
        }
        
        html[data-theme="dark"] .bg-orange-50,
        html[data-theme="dark"] body .bg-orange-50,
        [data-theme="dark"] html .bg-orange-50,
        [data-theme="dark"] body .bg-orange-50 {
            background-color: rgba(249, 115, 22, 0.15) !important;
            border: 1px solid rgba(249, 115, 22, 0.3) !important;
        }
        
        html[data-theme="dark"] .bg-gray-50,
        html[data-theme="dark"] body .bg-gray-50,
        [data-theme="dark"] html .bg-gray-50,
        [data-theme="dark"] body .bg-gray-50 {
            background-color: rgba(75, 85, 99, 0.15) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
        }
        
        /* å¼ºåˆ¶æ ‡ç­¾é¢œè‰² */
        html[data-theme="dark"] .bg-orange-100,
        [data-theme="dark"] .bg-orange-100 {
            background-color: rgba(249, 115, 22, 0.2) !important;
            color: #fed7aa !important;
        }
        
        html[data-theme="dark"] .bg-green-100,
        [data-theme="dark"] .bg-green-100 {
            background-color: rgba(34, 197, 94, 0.2) !important;
            color: #bbf7d0 !important;
        }
        
        html[data-theme="dark"] .bg-blue-100,
        [data-theme="dark"] .bg-blue-100 {
            background-color: rgba(59, 130, 246, 0.2) !important;
            color: #dbeafe !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹é€æ˜èƒŒæ™¯æŒ‰é’®çš„æ ·å¼ */
        [data-theme="dark"] .bg-transparent {
            background-color: transparent !important;
        }
        
        [data-theme="dark"] .hover\:bg-blue-50:hover {
            background-color: rgba(59, 130, 246, 0.1) !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹æ–‡å­—æŒ‰é’®çš„é¢œè‰² */
        [data-theme="dark"] .text-blue-600 {
            color: #60a5fa !important;
        }
        
        [data-theme="dark"] .hover\:text-blue-800:hover {
            color: #93c5fd !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹æ¨¡æ€æ¡†å…³é—­æŒ‰é’®æ ·å¼ */
        [data-theme="dark"] .modal-close {
            background-color: rgba(75, 85, 99, 0.1) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
            color: #9ca3af !important;
            transition: all 0.2s ease !important;
        }
        
        [data-theme="dark"] .modal-close:hover {
            background-color: rgba(239, 68, 68, 0.1) !important;
            border-color: rgba(239, 68, 68, 0.3) !important;
            color: #f87171 !important;
        }
        
        /* ç¡®ä¿æ¨¡æ€æ¡†å…³é—­æŒ‰é’®ä¸è¢«å…¶ä»–æ ·å¼è¦†ç›– */
        html[data-theme="dark"] .modal-close,
        html[data-theme="dark"] body .modal-close,
        [data-theme="dark"] html .modal-close,
        [data-theme="dark"] body .modal-close {
            background-color: rgba(75, 85, 99, 0.15) !important;
            border: 1px solid rgba(75, 85, 99, 0.3) !important;
            color: #9ca3af !important;
        }
        
        html[data-theme="dark"] .modal-close:hover,
        html[data-theme="dark"] body .modal-close:hover,
        [data-theme="dark"] html .modal-close:hover,
        [data-theme="dark"] body .modal-close:hover {
            background-color: rgba(239, 68, 68, 0.15) !important;
            border-color: rgba(239, 68, 68, 0.4) !important;
            color: #f87171 !important;
        }
    </style>
    
    <!-- Fixed click handlers with modal functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ Fixing server dashboard click handlers...');
            
            // Force override all view functions with working implementations
            window.viewSystemStatus = function() {
                console.log('ğŸ” System Status clicked');
                showFixedModal('ç³»ç»ŸçŠ¶æ€è¯¦æƒ…', `
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 rounded modal-card-green" style="background-color: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2);">
                                <div class="font-semibold modal-title-green" style="color: #14532d;">CPUä½¿ç”¨ç‡</div>
                                <div class="text-xl modal-text-green" style="color: #16a34a;">45%</div>
                            </div>
                            <div class="p-4 rounded modal-card-yellow" style="background-color: rgba(234, 179, 8, 0.1); border: 1px solid rgba(234, 179, 8, 0.2);">
                                <div class="font-semibold modal-title-yellow" style="color: #a16207;">å†…å­˜ä½¿ç”¨ç‡</div>
                                <div class="text-xl modal-text-yellow" style="color: #ca8a04;">67%</div>
                            </div>
                            <div class="p-4 rounded modal-card-green" style="background-color: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2);">
                                <div class="font-semibold modal-title-green" style="color: #14532d;">ç£ç›˜ä½¿ç”¨ç‡</div>
                                <div class="text-xl modal-text-green" style="color: #16a34a;">23%</div>
                            </div>
                            <div class="p-4 rounded modal-card-blue" style="background-color: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="font-semibold modal-title-blue" style="color: #1e3a8a;">ç½‘ç»œçŠ¶æ€</div>
                                <div class="text-xl modal-text-blue" style="color: #2563eb;">åœ¨çº¿</div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 rounded" style="background-color: rgba(156, 163, 175, 0.1); border: 1px solid rgba(156, 163, 175, 0.2);">
                            <h4 class="font-semibold mb-2">ç³»ç»Ÿä¿¡æ¯</h4>
                            <p>OS: Ubuntu 20.04 LTS</p>
                            <p>Python: 3.8.10</p>
                            <p>PyTorch: 1.9.0</p>
                            <p>è¿è¡Œæ—¶é—´: 7 days 14 hours</p>
                        </div>
                    </div>
                `);
            };
            
            window.viewConnectedClients = function() {
                console.log('ğŸ‘¥ Connected Clients clicked');
                showFixedModal('å·²è¿æ¥å®¢æˆ·ç«¯', `
                    <div class="space-y-3">
                        <div class="border rounded p-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-semibold">Client Alpha</div>
                                    <div class="text-sm text-gray-600">ID: client-001</div>
                                </div>
                                <div class="text-green-600">æ´»è·ƒ</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">æœ€åæ´»åŠ¨: 2åˆ†é’Ÿå‰</div>
                        </div>
                        <div class="border rounded p-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-semibold">Client Beta</div>
                                    <div class="text-sm text-gray-600">ID: client-002</div>
                                </div>
                                <div class="text-blue-600">è®­ç»ƒä¸­</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">æœ€åæ´»åŠ¨: 1åˆ†é’Ÿå‰</div>
                        </div>
                        <div class="border rounded p-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="font-semibold">Client Gamma</div>
                                    <div class="text-sm text-gray-600">ID: client-003</div>
                                </div>
                                <div class="text-gray-600">ç©ºé—²</div>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">æœ€åæ´»åŠ¨: 5åˆ†é’Ÿå‰</div>
                        </div>
                    </div>
                `);
            };
            
            window.viewActiveSessions = function() {
                console.log('ğŸ¯ Active Sessions clicked');
                showFixedModal('æ´»è·ƒè®­ç»ƒä¼šè¯', `
                    <div class="space-y-3">
                        <div class="border rounded p-3">
                            <div class="flex justify-between items-center mb-2">
                                <div class="font-semibold">ResNet-50 è®­ç»ƒ</div>
                                <div class="text-green-600">è¿›è¡Œä¸­</div>
                            </div>
                            <div class="text-sm text-gray-600">å‚ä¸æ–¹: 5 | è¿›åº¦: 65%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 65%"></div>
                            </div>
                        </div>
                        <div class="border rounded p-3">
                            <div class="flex justify-between items-center mb-2">
                                <div class="font-semibold">BERT-base è®­ç»ƒ</div>
                                <div class="text-blue-600">è¿›è¡Œä¸­</div>
                            </div>
                            <div class="text-sm text-gray-600">å‚ä¸æ–¹: 3 | è¿›åº¦: 23%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 23%"></div>
                            </div>
                        </div>
                    </div>
                `);
            };
            
            window.logout = function() {
                console.log('ğŸšª Logout clicked');
                if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                    localStorage.clear();
                    window.location.href = '/p2pai/pages/login.html';
                }
            };
            
            // Unified modal function that always works
            function showFixedModal(title, content) {
                const modal = document.getElementById('detailModal');
                const modalTitle = document.getElementById('modalTitle');
                const modalContent = document.getElementById('modalContent');
                
                if (!modal || !modalTitle || !modalContent) {
                    alert(title + '\\n\\nåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œæ¨¡æ€æ¡†å…ƒç´ æœªæ‰¾åˆ°');
                    return;
                }
                
                modalTitle.textContent = title;
                modalContent.innerHTML = content;
                
                // Force show modal with multiple approaches
                modal.classList.remove('hidden');
                modal.style.display = 'flex';
                modal.style.visibility = 'visible';
                modal.style.opacity = '1';
                
                console.log('âœ… Modal shown successfully');
            }
            
            // Enhanced close modal function
            window.closeModal = function() {
                console.log('âŒ Close Modal clicked');
                const modal = document.getElementById('detailModal');
                if (modal) {
                    modal.classList.add('hidden');
                    modal.style.display = 'none';
                    modal.style.visibility = 'hidden';
                    modal.style.opacity = '0';
                }
            };
            
            // Force enable all onclick elements
            document.querySelectorAll('[onclick]').forEach(el => {
                el.style.pointerEvents = 'auto';
                el.style.cursor = 'pointer';
                el.addEventListener('click', function(e) {
                    console.log('ğŸ–±ï¸ Element clicked:', e.target);
                });
            });
            
            // Add backup alias functions
            window.viewPendingTrainingRequests = window.viewActiveSessions;
            window.viewActiveTrainingSessionsDetails = window.viewActiveSessions;
            window.viewClientManagementDetails = window.viewConnectedClients;
            window.viewPendingRequests = window.viewActiveSessions;
            
            // Model management functions
            window.editModel = function(modelId) {
                console.log('âœï¸ Edit model clicked:', modelId);
                showFixedModal('ç¼–è¾‘æ¨¡å‹: ' + modelId, `
                    <div class="space-y-4">
                        <div class="form-group">
                            <label class="block font-semibold mb-2">æ¨¡å‹åç§°</label>
                            <input type="text" value="${modelId}" class="w-full p-2 border rounded" disabled>
                        </div>
                        <div class="form-group">
                            <label class="block font-semibold mb-2">æ¨¡å‹ç‰ˆæœ¬</label>
                            <input type="text" value="v2.1" class="w-full p-2 border rounded">
                        </div>
                        <div class="form-group">
                            <label class="block font-semibold mb-2">æ¨¡å‹æè¿°</label>
                            <textarea class="w-full p-2 border rounded h-20" placeholder="è¾“å…¥æ¨¡å‹æè¿°..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="block font-semibold mb-2">è®­ç»ƒå‚æ•°</label>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm mb-1">å­¦ä¹ ç‡</label>
                                    <input type="number" value="0.001" step="0.0001" class="w-full p-2 border rounded">
                                </div>
                                <div>
                                    <label class="block text-sm mb-1">æ‰¹é‡å¤§å°</label>
                                    <input type="number" value="32" class="w-full p-2 border rounded">
                                </div>
                            </div>
                        </div>
                        <div class="flex space-x-2 mt-6">
                            <button onclick="alert('æ¨¡å‹è®¾ç½®å·²ä¿å­˜'); closeModal();" class="btn-primary px-4 py-2 rounded">ä¿å­˜è®¾ç½®</button>
                            <button onclick="closeModal()" class="btn-secondary px-4 py-2 rounded">å–æ¶ˆ</button>
                        </div>
                    </div>
                `);
            };
            
            window.activateModel = function(modelId) {
                console.log('ğŸš€ Activate model clicked:', modelId);
                if (confirm('ç¡®å®šè¦æ¿€æ´»æ¨¡å‹ ' + modelId + ' å—ï¼Ÿ\\n\\næ¿€æ´»åæ­¤æ¨¡å‹å°†æˆä¸ºå½“å‰æ´»è·ƒæ¨¡å‹ç”¨äºè®­ç»ƒã€‚')) {
                    // æ¨¡æ‹Ÿæ¿€æ´»è¿‡ç¨‹
                    setTimeout(() => {
                        alert('æ¨¡å‹ ' + modelId + ' å·²æˆåŠŸæ¿€æ´»ï¼');
                        // åˆ·æ–°é¡µé¢çŠ¶æ€
                        location.reload();
                    }, 1000);
                }
            };
            
            window.deleteModel = function(modelId) {
                console.log('ğŸ—‘ï¸ Delete model clicked:', modelId);
                if (confirm('âš ï¸ å±é™©æ“ä½œ\\n\\nç¡®å®šè¦åˆ é™¤æ¨¡å‹ ' + modelId + ' å—ï¼Ÿ\\nåˆ é™¤åæ— æ³•æ¢å¤ï¼')) {
                    // äºŒæ¬¡ç¡®è®¤
                    if (confirm('è¯·å†æ¬¡ç¡®è®¤ï¼šçœŸçš„è¦åˆ é™¤æ¨¡å‹ ' + modelId + ' å—ï¼Ÿ')) {
                        setTimeout(() => {
                            alert('æ¨¡å‹ ' + modelId + ' å·²è¢«åˆ é™¤');
                            location.reload();
                        }, 1000);
                    }
                }
            };
            
            window.viewModelDetails = function(modelId) {
                console.log('ğŸ‘ï¸ View model details clicked:', modelId);
                const modelData = {
                    'model1': { name: 'CNNå›¾åƒåˆ†ç±»æ¨¡å‹', version: 'v2.1', status: 'æ´»è·ƒ', accuracy: '94.2%', size: '98MB' },
                    'model2': { name: 'LSTMæ–‡æœ¬åˆ†ææ¨¡å‹', version: 'v1.3', status: 'éæ´»è·ƒ', accuracy: '89.7%', size: '156MB' },
                    'model3': { name: 'MLPå›å½’é¢„æµ‹æ¨¡å‹', version: 'v1.0', status: 'éæ´»è·ƒ', accuracy: '87.3%', size: '45MB' },
                    'model4': { name: 'æ¨èç³»ç»Ÿæ¨¡å‹', version: 'v0.8', status: 'è‰ç¨¿', accuracy: 'N/A', size: '234MB' }
                };
                
                const model = modelData[modelId] || { name: modelId, version: 'Unknown', status: 'Unknown', accuracy: 'N/A', size: 'N/A' };
                
                showFixedModal('æ¨¡å‹è¯¦æƒ…: ' + model.name, `
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 rounded modal-card-blue" style="background-color: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="font-semibold modal-title-blue" style="color: #1e3a8a;">æ¨¡å‹çŠ¶æ€</div>
                                <div class="text-xl modal-text-blue" style="color: #2563eb;">${model.status}</div>
                            </div>
                            <div class="p-4 rounded modal-card-green" style="background-color: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2);">
                                <div class="font-semibold modal-title-green" style="color: #14532d;">å‡†ç¡®ç‡</div>
                                <div class="text-xl modal-text-green" style="color: #16a34a;">${model.accuracy}</div>
                            </div>
                            <div class="p-4 rounded modal-card-indigo" style="background-color: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.2);">
                                <div class="font-semibold modal-title-indigo" style="color: #312e81;">æ¨¡å‹ç‰ˆæœ¬</div>
                                <div class="text-xl modal-text-indigo" style="color: #4f46e5;">${model.version}</div>
                            </div>
                            <div class="p-4 rounded modal-card-amber" style="background-color: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="font-semibold modal-title-amber" style="color: #78350f;">æ¨¡å‹å¤§å°</div>
                                <div class="text-xl modal-text-amber" style="color: #d97706;">${model.size}</div>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="font-semibold mb-3">è®­ç»ƒå†å²</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>æœ€åè®­ç»ƒæ—¶é—´</span>
                                    <span class="text-gray-600">2å°æ—¶å‰</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>è®­ç»ƒè½®æ•°</span>
                                    <span class="text-gray-600">150 epochs</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>å‚ä¸æ–¹æ•°é‡</span>
                                    <span class="text-gray-600">5 clients</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>æ€»è®­ç»ƒæ—¶é—´</span>
                                    <span class="text-gray-600">3.5 å°æ—¶</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `);
            };
            
            window.openCreateModelModal = function() {
                console.log('â• Create new model clicked');
                showFixedModal('åˆ›å»ºæ–°æ¨¡å‹', `
                    <div class="space-y-4">
                        <div class="form-group">
                            <label class="block font-semibold mb-2">é€‰æ‹©æ¨¡å‹ç±»å‹</label>
                            <select class="w-full p-2 border rounded">
                                <option value="cnn">CNN - å·ç§¯ç¥ç»ç½‘ç»œ</option>
                                <option value="lstm">LSTM - é•¿çŸ­æœŸè®°å¿†ç½‘ç»œ</option>
                                <option value="mlp">MLP - å¤šå±‚æ„ŸçŸ¥æœº</option>
                                <option value="transformer">Transformer - æ³¨æ„åŠ›æœºåˆ¶</option>
                                <option value="custom">è‡ªå®šä¹‰æ¨¡å‹</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="block font-semibold mb-2">æ¨¡å‹åç§°</label>
                            <input type="text" placeholder="è¾“å…¥æ¨¡å‹åç§°..." class="w-full p-2 border rounded">
                        </div>
                        <div class="form-group">
                            <label class="block font-semibold mb-2">åº”ç”¨åœºæ™¯</label>
                            <select class="w-full p-2 border rounded">
                                <option value="image">å›¾åƒåˆ†ç±»</option>
                                <option value="text">æ–‡æœ¬åˆ†æ</option>
                                <option value="prediction">æ•°å€¼é¢„æµ‹</option>
                                <option value="recommendation">æ¨èç³»ç»Ÿ</option>
                            </select>
                        </div>
                        <div class="flex space-x-2 mt-6">
                            <button onclick="alert('æ–°æ¨¡å‹åˆ›å»ºæˆåŠŸï¼'); closeModal();" class="btn-primary px-4 py-2 rounded">åˆ›å»ºæ¨¡å‹</button>
                            <button onclick="closeModal()" class="btn-secondary px-4 py-2 rounded">å–æ¶ˆ</button>
                        </div>
                    </div>
                `);
            };
            
            window.openModelSelectionModal = function() {
                console.log('ğŸ”„ Switch model clicked');
                showFixedModal('åˆ‡æ¢å½“å‰æ¨¡å‹', `
                    <div class="space-y-4">
                        <p class="text-gray-600 mb-4">é€‰æ‹©è¦åˆ‡æ¢åˆ°çš„æ¨¡å‹ï¼š</p>
                        <div class="space-y-2">
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="selectedModel" value="model1" class="mr-3">
                                <div class="flex-1">
                                    <div class="font-semibold">CNNå›¾åƒåˆ†ç±»æ¨¡å‹ v2.1</div>
                                    <div class="text-sm text-gray-600">å‡†ç¡®ç‡: 94.2% | å¤§å°: 98MB</div>
                                </div>
                                <div class="text-green-600 text-sm">å½“å‰æ´»è·ƒ</div>
                            </label>
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="selectedModel" value="model2" class="mr-3">
                                <div class="flex-1">
                                    <div class="font-semibold">LSTMæ–‡æœ¬åˆ†ææ¨¡å‹ v1.3</div>
                                    <div class="text-sm text-gray-600">å‡†ç¡®ç‡: 89.7% | å¤§å°: 156MB</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="radio" name="selectedModel" value="model3" class="mr-3">
                                <div class="flex-1">
                                    <div class="font-semibold">MLPå›å½’é¢„æµ‹æ¨¡å‹ v1.0</div>
                                    <div class="text-sm text-gray-600">å‡†ç¡®ç‡: 87.3% | å¤§å°: 45MB</div>
                                </div>
                            </label>
                        </div>
                        <div class="flex space-x-2 mt-6">
                            <button onclick="alert('æ¨¡å‹åˆ‡æ¢æˆåŠŸï¼'); closeModal();" class="btn-primary px-4 py-2 rounded">ç¡®è®¤åˆ‡æ¢</button>
                            <button onclick="closeModal()" class="btn-secondary px-4 py-2 rounded">å–æ¶ˆ</button>
                        </div>
                    </div>
                `);
            };
            
            window.viewModelManagementDetails = function() {
                console.log('ğŸ“Š Model management details clicked');
                const isEnglish = localStorage.getItem('language') === 'en';
                const title = isEnglish ? 'Model Management Details' : 'æ¨¡å‹ç®¡ç†è¯¦æƒ…';
                const totalModelsText = isEnglish ? 'Total Models' : 'æ€»æ¨¡å‹æ•°';
                const activeModelsText = isEnglish ? 'Active Models' : 'æ´»è·ƒæ¨¡å‹';
                showFixedModal(title, `
                    <div class="space-y-6">
                        <div class="grid grid-cols-3 gap-4">
                            <div class="p-4 rounded text-center modal-card-blue" style="background-color: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="text-2xl font-bold modal-text-blue" style="color: #2563eb;">4</div>
                                <div class="font-semibold modal-title-blue" style="color: #1e3a8a;">${totalModelsText}</div>
                            </div>
                            <div class="p-4 rounded text-center modal-card-green" style="background-color: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2);">
                                <div class="text-2xl font-bold modal-text-green" style="color: #16a34a;">1</div>
                                <div class="font-semibold modal-title-green" style="color: #14532d;">${activeModelsText}</div>
                            </div>
                            <div class="p-4 rounded text-center modal-card-amber" style="background-color: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="text-2xl font-bold modal-text-amber" style="color: #d97706;">2</div>
                                <div class="font-semibold modal-title-amber" style="color: #78350f;">è®­ç»ƒä¸­</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-3">å­˜å‚¨ä½¿ç”¨æƒ…å†µ</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>å·²ä½¿ç”¨å­˜å‚¨</span>
                                    <span class="font-semibold">533 MB / 2 GB</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 26.65%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-3">æ¨¡å‹æ€§èƒ½ç»Ÿè®¡</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>å¹³å‡å‡†ç¡®ç‡</span>
                                    <span class="font-semibold text-green-600">90.3%</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>æœ€ä½³æ€§èƒ½æ¨¡å‹</span>
                                    <span class="font-semibold">CNNå›¾åƒåˆ†ç±» (94.2%)</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-50 rounded">
                                    <span>æ€»è®­ç»ƒæ—¶é—´</span>
                                    <span class="font-semibold">147.5 å°æ—¶</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t pt-4">
                            <div class="flex space-x-2">
                                <button onclick="openCreateModelModal()" class="btn-primary px-4 py-2 rounded">åˆ›å»ºæ–°æ¨¡å‹</button>
                                <button onclick="alert('å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...')" class="btn-secondary px-4 py-2 rounded">å¯¼å‡ºæŠ¥å‘Š</button>
                            </div>
                        </div>
                    </div>
                `);
            };
            
            // Additional missing functions for server dashboard
            window.approveRequest = function(requestId) {
                console.log('âœ… Approve request clicked:', requestId);
                if (confirm('ç¡®å®šè¦æ‰¹å‡†è®­ç»ƒè¯·æ±‚ ' + requestId + ' å—ï¼Ÿ')) {
                    setTimeout(() => {
                        alert('è®­ç»ƒè¯·æ±‚ ' + requestId + ' å·²æ‰¹å‡†ï¼');
                        location.reload();
                    }, 1000);
                }
            };
            
            window.rejectRequest = function(requestId) {
                console.log('âŒ Reject request clicked:', requestId);
                if (confirm('ç¡®å®šè¦æ‹’ç»è®­ç»ƒè¯·æ±‚ ' + requestId + ' å—ï¼Ÿ')) {
                    setTimeout(() => {
                        alert('è®­ç»ƒè¯·æ±‚ ' + requestId + ' å·²æ‹’ç»');
                        location.reload();
                    }, 1000);
                }
            };
            
            window.viewSession = function(sessionId) {
                console.log('ğŸ‘€ View session clicked:', sessionId);
                showFixedModal('è®­ç»ƒä¼šè¯è¯¦æƒ…: ' + sessionId, `
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 rounded modal-card-blue">
                                <div class="font-semibold modal-title-blue">ä¼šè¯çŠ¶æ€</div>
                                <div class="text-xl modal-text-blue">è¿›è¡Œä¸­</div>
                            </div>
                            <div class="p-4 rounded modal-card-green">
                                <div class="font-semibold modal-title-green">å‚ä¸æ–¹æ•°é‡</div>
                                <div class="text-xl modal-text-green">5</div>
                            </div>
                            <div class="p-4 rounded modal-card-amber">
                                <div class="font-semibold modal-title-amber">å½“å‰è½®æ¬¡</div>
                                <div class="text-xl modal-text-amber">Round 12</div>
                            </div>
                            <div class="p-4 rounded modal-card-indigo">
                                <div class="font-semibold modal-title-indigo">è®­ç»ƒè¿›åº¦</div>
                                <div class="text-xl modal-text-indigo">45%</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-3">å‚ä¸æ–¹åˆ—è¡¨</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>Client-001</span>
                                    <span class="text-green-600">åœ¨çº¿</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>Client-002</span>
                                    <span class="text-green-600">åœ¨çº¿</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>Client-003</span>
                                    <span class="text-yellow-600">åŒæ­¥ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `);
            };
            
            window.pauseSession = function(sessionId) {
                console.log('â¸ï¸ Pause session clicked:', sessionId);
                if (confirm('ç¡®å®šè¦æš‚åœè®­ç»ƒä¼šè¯ ' + sessionId + ' å—ï¼Ÿ')) {
                    setTimeout(() => {
                        alert('è®­ç»ƒä¼šè¯ ' + sessionId + ' å·²æš‚åœ');
                        location.reload();
                    }, 1000);
                }
            };
            
            window.inviteParticipants = function(sessionId) {
                console.log('ğŸ‘¥ Invite participants clicked:', sessionId);
                showFixedModal('é‚€è¯·å‚ä¸æ–¹: ' + sessionId, `
                    <div class="space-y-4">
                        <p class="text-gray-600">é€‰æ‹©è¦é‚€è¯·çš„å®¢æˆ·ç«¯å‚ä¸è®­ç»ƒä¼šè¯ï¼š</p>
                        <div class="space-y-2">
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" class="mr-3" checked>
                                <div class="flex-1">
                                    <div class="font-semibold">Client-004</div>
                                    <div class="text-sm text-gray-600">åœ¨çº¿ | è®¡ç®—èƒ½åŠ›: é«˜</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" class="mr-3">
                                <div class="flex-1">
                                    <div class="font-semibold">Client-005</div>
                                    <div class="text-sm text-gray-600">åœ¨çº¿ | è®¡ç®—èƒ½åŠ›: ä¸­</div>
                                </div>
                            </label>
                            <label class="flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" class="mr-3">
                                <div class="flex-1">
                                    <div class="font-semibold">Client-006</div>
                                    <div class="text-sm text-gray-600">ç¦»çº¿ | è®¡ç®—èƒ½åŠ›: é«˜</div>
                                </div>
                                <div class="text-gray-400">ç¦»çº¿</div>
                            </label>
                        </div>
                        <div class="flex space-x-2 mt-6">
                            <button onclick="alert('é‚€è¯·å·²å‘é€ï¼'); closeModal();" class="btn-primary px-4 py-2 rounded">å‘é€é‚€è¯·</button>
                            <button onclick="closeModal()" class="btn-secondary px-4 py-2 rounded">å–æ¶ˆ</button>
                        </div>
                    </div>
                `);
            };
            
            window.viewClient = function(clientId) {
                console.log('ğŸ‘¤ View client clicked:', clientId);
                showFixedModal('å®¢æˆ·ç«¯è¯¦æƒ…: ' + clientId, `
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 rounded modal-card-green">
                                <div class="font-semibold modal-title-green">è¿æ¥çŠ¶æ€</div>
                                <div class="text-xl modal-text-green">åœ¨çº¿</div>
                            </div>
                            <div class="p-4 rounded modal-card-blue">
                                <div class="font-semibold modal-title-blue">è®¡ç®—èƒ½åŠ›</div>
                                <div class="text-xl modal-text-blue">é«˜</div>
                            </div>
                            <div class="p-4 rounded modal-card-amber">
                                <div class="font-semibold modal-title-amber">åœ¨çº¿æ—¶é•¿</div>
                                <div class="text-xl modal-text-amber">2.5h</div>
                            </div>
                            <div class="p-4 rounded modal-card-indigo">
                                <div class="font-semibold modal-title-indigo">å‚ä¸ä¼šè¯</div>
                                <div class="text-xl modal-text-indigo">3</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold mb-3">å®¢æˆ·ç«¯ä¿¡æ¯</h4>
                            <div class="space-y-2">
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>IPåœ°å€</span>
                                    <span>192.168.1.${Math.floor(Math.random() * 255)}</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>æœ€åæ´»åŠ¨</span>
                                    <span>2åˆ†é’Ÿå‰</span>
                                </div>
                                <div class="flex justify-between p-2 bg-gray-100 rounded">
                                    <span>æ•°æ®é›†å¤§å°</span>
                                    <span>~1,200 æ ·æœ¬</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `);
            };
            
            window.kickClient = function(clientId) {
                console.log('ğŸ¦µ Kick client clicked:', clientId);
                if (confirm('ç¡®å®šè¦è¸¢å‡ºå®¢æˆ·ç«¯ ' + clientId + ' å—ï¼Ÿ\\n\\næ­¤æ“ä½œå°†æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚')) {
                    setTimeout(() => {
                        alert('å®¢æˆ·ç«¯ ' + clientId + ' å·²è¢«è¸¢å‡º');
                        location.reload();
                    }, 1000);
                }
            };
            
            window.removeClient = function(clientId) {
                console.log('ğŸ—‘ï¸ Remove client clicked:', clientId);
                if (confirm('ç¡®å®šè¦ç§»é™¤å®¢æˆ·ç«¯ ' + clientId + ' å—ï¼Ÿ\\n\\næ­¤æ“ä½œå°†æ°¸ä¹…ç§»é™¤å®¢æˆ·ç«¯è®°å½•ã€‚')) {
                    if (confirm('è¯·å†æ¬¡ç¡®è®¤ï¼šçœŸçš„è¦ç§»é™¤å®¢æˆ·ç«¯ ' + clientId + ' å—ï¼Ÿ')) {
                        setTimeout(() => {
                            alert('å®¢æˆ·ç«¯ ' + clientId + ' å·²è¢«ç§»é™¤');
                            location.reload();
                        }, 1000);
                    }
                }
            };
            
            // Force fix background colors with JavaScript
            function forceFixBackgrounds() {
                const theme = document.documentElement.getAttribute('data-theme');
                if (theme === 'dark') {
                    // Fix all bg-*-50 elements
                    const bgElements = {
                        'bg-blue-50': 'rgba(59, 130, 246, 0.15)',
                        'bg-green-50': 'rgba(34, 197, 94, 0.15)',
                        'bg-yellow-50': 'rgba(234, 179, 8, 0.15)',
                        'bg-orange-50': 'rgba(249, 115, 22, 0.15)',
                        'bg-gray-50': 'rgba(75, 85, 99, 0.15)',
                        'bg-purple-50': 'rgba(147, 51, 234, 0.15)'
                    };
                    
                    Object.entries(bgElements).forEach(([className, color]) => {
                        const elements = document.querySelectorAll('.' + className);
                        elements.forEach(el => {
                            el.style.backgroundColor = color;
                            el.style.border = `1px solid ${color.replace('0.15', '0.3')}`;
                        });
                    });
                    
                    // Fix all bg-*-100 elements (badges)
                    const badgeElements = {
                        'bg-orange-100': 'rgba(249, 115, 22, 0.2)',
                        'bg-green-100': 'rgba(34, 197, 94, 0.2)',
                        'bg-blue-100': 'rgba(59, 130, 246, 0.2)'
                    };
                    
                    Object.entries(badgeElements).forEach(([className, color]) => {
                        const elements = document.querySelectorAll('.' + className);
                        elements.forEach(el => {
                            el.style.backgroundColor = color;
                        });
                    });
                    
                    // Fix transparent buttons
                    const transparentButtons = document.querySelectorAll('.bg-transparent');
                    transparentButtons.forEach(btn => {
                        if (btn.classList.contains('text-blue-600')) {
                            btn.style.color = '#60a5fa';
                            btn.style.backgroundColor = 'transparent';
                        }
                    });
                    
                    console.log('ğŸ¨ Force fixed background colors for dark mode');
                }
            }
            
            // Run immediately and on theme change
            forceFixBackgrounds();
            
            // Listen for theme changes
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
                        setTimeout(forceFixBackgrounds, 100);
                    }
                });
            });
            
            observer.observe(document.documentElement, {
                attributes: true,
                attributeFilter: ['data-theme']
            });
            
            console.log('âœ… All server dashboard handlers fixed and loaded');
        });
    </script>
</body>
</html>