<!DOCTYPE html>
<html lang="zh-CN" data-i18n-title="edgeai.allNodes.title">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹ - EdgeAI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../shared/css/unified-styles.css?v=1756673001">
    <style>
        /* EdgeAI èŠ‚ç‚¹ç®¡ç†é¡µé¢ - ä»…ä¿ç•™å¿…è¦çš„è‡ªå®šä¹‰æ ·å¼ */
        
        [data-theme="dark"] .text-gray-900 {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .text-gray-700 {
            color: #e5e7eb !important;
        }
        
        [data-theme="dark"] .text-gray-500 {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] .border-gray-200 {
            border-color: #374151 !important;
        }
        
        [data-theme="dark"] .border-gray-300 {
            border-color: #4b5563 !important;
        }
        
        [data-theme="dark"] input,
        [data-theme="dark"] textarea,
        [data-theme="dark"] select {
            background-color: #374151 !important;
            border-color: #4b5563 !important;
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] input::placeholder {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] input:focus,
        [data-theme="dark"] select:focus {
            background-color: #4b5563 !important;
            border-color: #3b82f6 !important;
        }
        
        [data-theme="dark"] .shadow,
        [data-theme="dark"] .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15) !important;
        }
        
        [data-theme="dark"] .divide-gray-200 > :not([hidden]) ~ :not([hidden]) {
            border-color: #374151 !important;
        }
        
        [data-theme="dark"] .hover\\:bg-gray-50:hover {
            background-color: #374151 !important;
        }
        
        [data-theme="dark"] thead {
            background-color: #374151 !important;
        }
        
        [data-theme="dark"] .bg-gray-50 {
            background-color: #374151 !important;
        }
        
        /* ç¡®ä¿ç»Ÿè®¡å¡ç‰‡æ–‡å­—æ¸…æ™° */
        [data-theme="light"] .text-gray-900 {
            color: #111827 !important;
        }
        
        [data-theme="light"] .text-gray-600 {
            color: #4b5563 !important;
        }
        
        [data-theme="dark"] .text-gray-900 {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] .text-gray-600 {
            color: #d1d5db !important;
        }
        
        /* ç¡®ä¿è¡¨æ ¼æ–‡å­—æ¸…æ™° */
        [data-theme="light"] .text-gray-500 {
            color: #6b7280 !important;
        }
        
        [data-theme="dark"] .text-gray-500 {
            color: #9ca3af !important;
        }
        
        /* è¿‡æ»¤å™¨æ ‡ç­¾æ ·å¼ */
        [data-theme="light"] .text-gray-700 {
            color: #374151 !important;
        }
        
        [data-theme="dark"] .text-gray-700 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] tbody tr:hover {
            background-color: #374151 !important;
        }
        
        /* ç»Ÿè®¡å¡ç‰‡æ·±è‰²æ¨¡å¼ */
        [data-theme="dark"] .bg-green-100 {
            background-color: rgba(34, 197, 94, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-blue-100 {
            background-color: rgba(59, 130, 246, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-yellow-100 {
            background-color: rgba(245, 158, 11, 0.2) !important;
        }
        
        [data-theme="dark"] .bg-red-100 {
            background-color: rgba(239, 68, 68, 0.2) !important;
        }
        
        [data-theme="dark"] .text-green-600 {
            color: #10b981 !important;
        }
        
        [data-theme="dark"] .text-blue-600 {
            color: #3b82f6 !important;
        }
        
        [data-theme="dark"] .text-yellow-600 {
            color: #f59e0b !important;
        }
        
        [data-theme="dark"] .text-red-600 {
            color: #ef4444 !important;
        }
        
        [data-theme="dark"] button:not(.theme-toggle):not(.language-toggle):not(.bg-blue-600) {
            background-color: #374151 !important;
            border-color: #4b5563 !important;
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] button:not(.theme-toggle):not(.language-toggle):not(.bg-blue-600):hover {
            background-color: #4b5563 !important;
        }
        
        /* ä¿æŒè“è‰²æŒ‰é’®çš„æ­£ç¡®é¢œè‰² */
        [data-theme="dark"] button.bg-blue-600,
        [data-theme="light"] button.bg-blue-600 {
            background-color: #2563eb !important;
            color: #ffffff !important;
            font-weight: 600 !important;
        }
        
        [data-theme="dark"] button.bg-blue-600:hover,
        [data-theme="light"] button.bg-blue-600:hover {
            background-color: #1d4ed8 !important;
            color: #ffffff !important;
        }
        
        /* ç®€åŒ–æ ·å¼ï¼Œä¸»è¦ä¾èµ–ç»Ÿä¸€ä¸»é¢˜ç³»ç»Ÿ */
        
        [data-theme="dark"] .bg-blue-500 {
            background-color: #3b82f6 !important;
        }
        
        [data-theme="dark"] .bg-blue-500:hover {
            background-color: #2563eb !important;
        }
        
        [data-theme="dark"] .bg-gray-200 {
            background-color: #374151 !important;
        }
        
        [data-theme="dark"] .bg-gray-200:hover {
            background-color: #4b5563 !important;
        }
        
        [data-theme="dark"] .bg-red-500 {
            background-color: #dc2626 !important;
        }
        
        [data-theme="dark"] .bg-red-500:hover {
            background-color: #b91c1c !important;
        }
        
        /* æ¨¡æ€æ¡†æ·±è‰²æ¨¡å¼ */
        [data-theme="dark"] #nodeDetailsModal .bg-white {
            background-color: #1f2937 !important;
        }
        
        [data-theme="dark"] #nodeDetailsModal .text-gray-900 {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] #nodeDetailsModal .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] #nodeDetailsModal .text-gray-400 {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] #nodeDetailsModal .bg-gray-50 {
            background-color: #374151 !important;
        }
        
        /* èŠ‚ç‚¹ç®¡ç†æ¨¡æ€æ¡†æ·±è‰²æ¨¡å¼ */
        [data-theme="dark"] #nodeManageModal .bg-white {
            background-color: #1f2937 !important;
        }
        
        [data-theme="dark"] #nodeManageModal .text-gray-900 {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] #nodeManageModal .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] #nodeManageModal .text-gray-400 {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] #nodeManageModal .bg-green-50 {
            background-color: rgba(34, 197, 94, 0.1) !important;
        }
        
        [data-theme="dark"] #nodeManageModal .bg-red-50 {
            background-color: rgba(239, 68, 68, 0.1) !important;
        }
        
        [data-theme="dark"] #nodeManageModal .bg-blue-50 {
            background-color: rgba(59, 130, 246, 0.1) !important;
        }
        
        [data-theme="dark"] #nodeManageModal .bg-gray-50 {
            background-color: #374151 !important;
        }
        
        [data-theme="dark"] #nodeManageModal .border-gray-200 {
            border-color: #4b5563 !important;
        }
        
        [data-theme="dark"] #nodeManageModal .border-green-200 {
            border-color: rgba(34, 197, 94, 0.3) !important;
        }
        
        [data-theme="dark"] #nodeManageModal .border-red-200 {
            border-color: rgba(239, 68, 68, 0.3) !important;
        }
        
        [data-theme="dark"] #nodeManageModal .border-blue-200 {
            border-color: rgba(59, 130, 246, 0.3) !important;
        }
        
        /* é¡¹ç›®æ ‡ç­¾è‡ªå®šä¹‰æ ·å¼ */
        .project-badge-a {
            background-color: #22c55e !important;
            color: #ffffff !important;
        }
        
        .project-badge-b {
            background-color: #f59e0b !important;
            color: #ffffff !important;
        }
        
        .project-badge-c {
            background-color: #ec4899 !important;
            color: #ffffff !important;
        }
        
        .project-badge-system {
            background-color: #6366f1 !important;
            color: #ffffff !important;
        }
        
        .project-badge-monitor {
            background-color: #f97316 !important;
            color: #ffffff !important;
        }
        
        .project-badge-unassigned {
            background-color: #6b7280 !important;
            color: #ffffff !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹é¡¹ç›®æ ‡ç­¾æ ·å¼è°ƒæ•´ */
        [data-theme="dark"] .project-badge-a {
            background-color: #16a34a !important;
        }
        
        [data-theme="dark"] .project-badge-b {
            background-color: #d97706 !important;
        }
        
        [data-theme="dark"] .project-badge-c {
            background-color: #db2777 !important;
        }
        
        [data-theme="dark"] .project-badge-system {
            background-color: #4f46e5 !important;
        }
        
        [data-theme="dark"] .project-badge-monitor {
            background-color: #ea580c !important;
        }
        
        [data-theme="dark"] .project-badge-unassigned {
            background-color: #4b5563 !important;
        }
        
        /* èŠ‚ç‚¹ç±»å‹æ ‡ç­¾è‡ªå®šä¹‰æ ·å¼ */
        .type-badge-edge {
            background-color: #3b82f6 !important;
            color: #ffffff !important;
        }
        
        .type-badge-control {
            background-color: #8b5cf6 !important;
            color: #ffffff !important;
        }
        
        .type-badge-observer {
            background-color: #6b7280 !important;
            color: #ffffff !important;
        }
        
        /* æ·±è‰²æ¨¡å¼ä¸‹èŠ‚ç‚¹ç±»å‹æ ‡ç­¾æ ·å¼è°ƒæ•´ */
        [data-theme="dark"] .type-badge-edge {
            background-color: #2563eb !important;
        }
        
        [data-theme="dark"] .type-badge-control {
            background-color: #7c3aed !important;
        }
        
        [data-theme="dark"] .type-badge-observer {
            background-color: #4b5563 !important;
        }
        
        /* è¿”å›æŒ‰é’®æ·±è‰²æ¨¡å¼æ ·å¼ */
        [data-theme="dark"] .text-gray-600 {
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .hover\\:text-gray-900:hover {
            color: #f9fafb !important;
        }
        
        [data-theme="dark"] .hover\\:bg-gray-100:hover {
            background-color: #374151 !important;
        }
        
        /* é¡¹ç›®åˆ†ç»„å®¹å™¨æ ·å¼ */
        .project-group {
            background: var(--bg-primary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .project-header {
            background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-primary);
        }
        
        [data-theme="dark"] .project-header {
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%) !important;
        }
        
        .node-type-section {
            padding: 20px 24px;
        }
        
        .node-type-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            font-size: 18px;
            font-weight: 600;
        }
        
        /* è®­ç»ƒèŠ‚ç‚¹ä¸»é¢˜è‰² - è“è‰²ç³» */
        .training-nodes-section {
            border-left: 4px solid #3b82f6;
        }
        
        .training-nodes-section .node-type-header {
            color: #1d4ed8;
        }
        
        [data-theme="dark"] .training-nodes-section .node-type-header {
            color: #60a5fa !important;
        }
        
        /* æ§åˆ¶èŠ‚ç‚¹ä¸»é¢˜è‰² - æ©™è‰²ç³» */
        .control-nodes-section {
            border-left: 4px solid #f97316;
        }
        
        .control-nodes-section .node-type-header {
            color: #ea580c;
        }
        
        [data-theme="dark"] .control-nodes-section .node-type-header {
            color: #fb923c !important;
        }
        
        /* è§‚å¯ŸèŠ‚ç‚¹ä¸»é¢˜è‰² - ç´«è‰²ç³» */
        .observer-nodes-section {
            border-left: 4px solid #8b5cf6;
        }
        
        .observer-nodes-section .node-type-header {
            color: #7c3aed;
        }
        
        [data-theme="dark"] .observer-nodes-section .node-type-header {
            color: #a78bfa !important;
        }
        
        /* èŠ‚ç‚¹å¡ç‰‡æ ·å¼ */
        .node-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 28px 36px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            overflow-x: auto;
            position: relative;
        }
        
        /* ç¡®ä¿å¡ç‰‡å†…å®¹ä¸è¢«æ‹‰ä¼¸ */
        .node-card > div {
            width: fit-content !important;
        }
        
        .node-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .node-card:last-child {
            margin-bottom: 0;
        }
        
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
        .node-card::-webkit-scrollbar {
            height: 6px;
        }
        
        .node-card::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 3px;
        }
        
        .node-card::-webkit-scrollbar-thumb {
            background: var(--border-secondary);
            border-radius: 3px;
        }
        
        .node-card::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
        
        
        /* æ§åˆ¶èŠ‚ç‚¹å¡ç‰‡ç‰¹æ®Šæ ·å¼ */
        .control-node-card {
            border-left: 4px solid #f97316;
            background: rgba(249, 115, 22, 0.05);
        }
        
        [data-theme="dark"] .control-node-card {
            background: rgba(249, 115, 22, 0.1) !important;
            border-left-color: #fb923c;
        }
        
        /* è®­ç»ƒèŠ‚ç‚¹å¡ç‰‡æ ·å¼ */
        .training-node-card {
            border-left: 4px solid #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }
        
        [data-theme="dark"] .training-node-card {
            background: rgba(59, 130, 246, 0.1) !important;
            border-left-color: #60a5fa;
        }
        
        /* è§‚å¯ŸèŠ‚ç‚¹å¡ç‰‡æ ·å¼ */
        .observer-node-card {
            border-left: 4px solid #8b5cf6;
            background: rgba(139, 92, 246, 0.05);
        }
        
        [data-theme="dark"] .observer-node-card {
            background: rgba(139, 92, 246, 0.1) !important;
            border-left-color: #a78bfa;
        }
        
        /* æ›´æ–°æ§åˆ¶èŠ‚ç‚¹ç±»å‹æ ‡ç­¾é¢œè‰² */
        .type-badge-control {
            background-color: #f97316 !important;
            color: #ffffff !important;
        }
        
        [data-theme="dark"] .type-badge-control {
            background-color: #ea580c !important;
        }
        
        /* èŠ‚ç‚¹å¡ç‰‡æŒ‰é’®æ ·å¼ç»Ÿä¸€ */
        .node-card button {
            min-width: 60px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        [data-theme="dark"] .node-card button {
            background-color: #4b5563 !important;
            color: #d1d5db !important;
        }
        
        [data-theme="dark"] .node-card button:hover {
            background-color: #6b7280 !important;
            color: #f9fafb !important;
        }
        
        /* ç¡®ä¿æ·±è‰²æ¨¡å¼ä¸‹æ•°æ®åˆ—æ ‡ç­¾å¯è§ */
        [data-theme="dark"] .node-card .text-gray-500 {
            color: #9ca3af !important;
        }
        
        [data-theme="dark"] .node-card .font-semibold {
            color: #f9fafb !important;
        }
    </style>
</head>
<body class="module-background theme-transition">
    <div class="min-h-screen">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <nav class="navbar fade-in-up">
            <div class="max-w-6xl mx-auto flex items-center justify-between">
                <div class="flex items-center">
                    <button onclick="navigateBack()" class="mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors rounded-lg hover:bg-gray-100">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <span class="navbar-brand" data-i18n="edgeai.allNodes.title">æ‰€æœ‰èŠ‚ç‚¹ç®¡ç†</span>
                </div>
                
                <div class="navbar-nav">
                    <button class="theme-toggle" title="åˆ‡æ¢ä¸»é¢˜">
                        <span>ğŸŒ™</span>
                    </button>
                    <button class="language-toggle" title="åˆ‡æ¢è¯­è¨€">EN</button>
                </div>
            </div>
        </nav>

        <!-- ä¸»è¦å†…å®¹ -->
        <div class="max-w-6xl mx-auto px-6 py-8">
            <!-- é¡µé¢å¤´éƒ¨ -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2" data-i18n="edgeai.allNodes.overview">EdgeAI èŠ‚ç‚¹æ€»è§ˆ</h2>
                        <p class="text-gray-600" data-i18n="edgeai.allNodes.description">ç®¡ç†å’Œç›‘æ§æ‰€æœ‰è¾¹ç¼˜AIèŠ‚ç‚¹çš„çŠ¶æ€å’Œæ€§èƒ½</p>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="refreshNodes()" class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                            <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            åˆ·æ–°
                        </button>
                    </div>
                </div>

                <!-- ç»Ÿè®¡å¡ç‰‡ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="card fade-in-up delay-1">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">åœ¨çº¿èŠ‚ç‚¹</p>
                                <p class="text-2xl font-semibold text-gray-900" id="onlineCount">15</p>
                            </div>
                        </div>
                    </div>

                    <div class="card fade-in-up delay-2">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">è®­ç»ƒä¸­</p>
                                <p class="text-2xl font-semibold text-gray-900" id="trainingCount">8</p>
                            </div>
                        </div>
                    </div>

                    <div class="card fade-in-up delay-3">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">ç©ºé—²èŠ‚ç‚¹</p>
                                <p class="text-2xl font-semibold text-gray-900" id="idleCount">5</p>
                            </div>
                        </div>
                    </div>

                    <div class="card fade-in-up delay-4">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm font-medium text-gray-600">æ•…éšœèŠ‚ç‚¹</p>
                                <p class="text-2xl font-semibold text-gray-900" id="errorCount">2</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æœç´¢å’Œè¿‡æ»¤ -->
            <div class="card mb-8 fade-in-up delay-5">
                <!-- æœç´¢æ  -->
                <div class="mb-4">
                    <div class="relative max-w-md">
                        <input type="text" id="searchInput" placeholder="æœç´¢èŠ‚ç‚¹åç§°æˆ–åœ°å€..."
                               class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm">
                        <div class="absolute left-3 top-3.5 text-gray-400">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- è¿‡æ»¤å™¨å’Œæ“ä½œæŒ‰é’® -->
                <div class="flex flex-wrap items-center justify-between gap-4">
                    <!-- è¿‡æ»¤é€‰é¡¹ -->
                    <div class="flex flex-wrap gap-3">
                        <!-- çŠ¶æ€è¿‡æ»¤ -->
                        <div class="flex flex-col">
                            <label class="text-xs font-medium text-gray-700 mb-1">çŠ¶æ€</label>
                            <select id="statusFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-w-28">
                                <option value="">æ‰€æœ‰çŠ¶æ€</option>
                                <option value="training">è®­ç»ƒä¸­</option>
                                <option value="completed">å·²å®Œæˆ</option>
                                <option value="idle">ç©ºé—²</option>
                                <option value="error">æ•…éšœ</option>
                            </select>
                        </div>

                        <!-- èŠ‚ç‚¹ç±»å‹è¿‡æ»¤ -->
                        <div class="flex flex-col">
                            <label class="text-xs font-medium text-gray-700 mb-1">ç±»å‹</label>
                            <select id="typeFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-w-28">
                                <option value="">æ‰€æœ‰ç±»å‹</option>
                                <option value="edge">è¾¹ç¼˜èŠ‚ç‚¹</option>
                                <option value="control">æ§åˆ¶èŠ‚ç‚¹</option>
                                <option value="observer">è§‚å¯ŸèŠ‚ç‚¹</option>
                            </select>
                        </div>

                        <!-- é¡¹ç›®è¿‡æ»¤ -->
                        <div class="flex flex-col">
                            <label class="text-xs font-medium text-gray-700 mb-1">é¡¹ç›®</label>
                            <select id="projectFilter" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-w-28">
                                <option value="">æ‰€æœ‰é¡¹ç›®</option>
                                <option value="é¡¹ç›®A">é¡¹ç›®A</option>
                                <option value="é¡¹ç›®B">é¡¹ç›®B</option>
                                <option value="é¡¹ç›®C">é¡¹ç›®C</option>
                                <option value="é¡¹ç›®D">é¡¹ç›®D</option>
                                <option value="ç³»ç»Ÿ">ç³»ç»Ÿ</option>
                                <option value="ç›‘æ§">ç›‘æ§</option>
                                <option value="æœªåˆ†é…">æœªåˆ†é…</option>
                            </select>
                        </div>
                    </div>

                    <!-- æ‰¹é‡æ“ä½œ -->
                    <div class="flex gap-3">
                        <button onclick="batchStart()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m6-6V7a3 3 0 00-3-3H6a3 3 0 00-3 3v10a3 3 0 003 3h7m-3-7l3-3 3 3m-6 4v6"></path>
                            </svg>
                            æ‰¹é‡å¯åŠ¨
                        </button>
                        <button onclick="batchStop()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9l6 6m0-6l-6 6"></path>
                            </svg>
                            æ‰¹é‡åœæ­¢
                        </button>
                    </div>
                </div>
            </div>

            <!-- æŒ‰é¡¹ç›®åˆ†ç»„çš„èŠ‚ç‚¹åˆ—è¡¨ -->
            <div id="projectsContainer" class="space-y-8 fade-in-up delay-6">
                <!-- é¡¹ç›®ç»„å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- èŠ‚ç‚¹è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="nodeDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-lg w-full m-4 max-h-[80vh] overflow-y-auto">
            <div class="p-4">
                <div class="flex justify-between items-center mb-3">
                    <h2 class="text-xl font-bold text-gray-900" id="modalNodeTitle">èŠ‚ç‚¹è¯¦æƒ…</h2>
                    <button onclick="closeNodeDetailsModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="modalNodeInfo">
                    <!-- èŠ‚ç‚¹è¯¦æƒ…å†…å®¹å°†é€šè¿‡JavaScriptå¡«å…… -->
                </div>
            </div>
        </div>
    </div>

    <!-- èŠ‚ç‚¹ç®¡ç†æ¨¡æ€æ¡† -->
    <div id="nodeManageModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg max-w-md w-full m-4">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-900" id="manageModalTitle">èŠ‚ç‚¹ç®¡ç†</h2>
                    <button onclick="closeNodeManageModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <p class="text-gray-600 mb-6" id="manageModalDescription">é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œï¼š</p>
                
                <div class="space-y-3">
                    <button onclick="executeAction('startTraining')" class="w-full flex items-center p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors group">
                        <div class="flex-shrink-0 w-10 h-10 bg-green-100 group-hover:bg-green-200 rounded-full flex items-center justify-center mr-4">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1"></path>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-sm font-semibold text-green-800">å¯åŠ¨è®­ç»ƒ</h3>
                            <p class="text-xs text-green-600">å¼€å§‹èŠ‚ç‚¹è®­ç»ƒä»»åŠ¡</p>
                        </div>
                        <svg class="w-5 h-5 text-green-400 group-hover:text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                    
                    <button onclick="executeAction('stopTraining')" class="w-full flex items-center p-4 bg-red-50 hover:bg-red-100 rounded-lg border border-red-200 transition-colors group">
                        <div class="flex-shrink-0 w-10 h-10 bg-red-100 group-hover:bg-red-200 rounded-full flex items-center justify-center mr-4">
                            <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9l6 6m0-6l-6 6"></path>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-sm font-semibold text-red-800">åœæ­¢è®­ç»ƒ</h3>
                            <p class="text-xs text-red-600">åœæ­¢å½“å‰è®­ç»ƒä»»åŠ¡</p>
                        </div>
                        <svg class="w-5 h-5 text-red-400 group-hover:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                    
                    <button onclick="executeAction('restart')" class="w-full flex items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors group">
                        <div class="flex-shrink-0 w-10 h-10 bg-blue-100 group-hover:bg-blue-200 rounded-full flex items-center justify-center mr-4">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-sm font-semibold text-blue-800">é‡å¯èŠ‚ç‚¹</h3>
                            <p class="text-xs text-blue-600">é‡æ–°å¯åŠ¨èŠ‚ç‚¹æœåŠ¡</p>
                        </div>
                        <svg class="w-5 h-5 text-blue-400 group-hover:text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                    
                    <button onclick="executeAction('delete')" class="w-full flex items-center p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors group">
                        <div class="flex-shrink-0 w-10 h-10 bg-gray-100 group-hover:bg-gray-200 rounded-full flex items-center justify-center mr-4">
                            <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                        </div>
                        <div class="flex-1 text-left">
                            <h3 class="text-sm font-semibold text-gray-800">åˆ é™¤èŠ‚ç‚¹</h3>
                            <p class="text-xs text-gray-600">ä»ç³»ç»Ÿä¸­ç§»é™¤èŠ‚ç‚¹</p>
                        </div>
                        <svg class="w-5 h-5 text-gray-400 group-hover:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-200">
                    <button onclick="closeNodeManageModal()" class="w-full px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        å–æ¶ˆ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../shared/js/navigation-unified.js"></script>
    <script src="../../shared/js/theme-manager-unified.js"></script>
    <script src="../../shared/js/i18n-manager.js?v=1756649655"></script>
    <script>
        // æ¨¡æ‹ŸèŠ‚ç‚¹æ•°æ®
        const allNodes = [
            // é¡¹ç›®Açš„èŠ‚ç‚¹
            { id: 'edge-1', name: 'è¾¹ç¼˜èŠ‚ç‚¹A-01', type: 'edge', status: 'training', progress: 97, cpu: 68.25, memory: '1.8GB', gpu: 83.15, url: 'http://192.168.1.101:8080', heartbeat: '5ç§’å‰', project: 'é¡¹ç›®A' },
            { id: 'edge-2', name: 'è¾¹ç¼˜èŠ‚ç‚¹A-02', type: 'edge', status: 'completed', progress: 100, cpu: 45.80, memory: '2.1GB', gpu: 78.20, url: 'http://192.168.1.102:8080', heartbeat: '2ç§’å‰', project: 'é¡¹ç›®A' },
            { id: 'edge-6', name: 'è¾¹ç¼˜èŠ‚ç‚¹A-03', type: 'edge', status: 'error', progress: 23, cpu: 0, memory: '0GB', gpu: 0, url: 'http://192.168.1.106:8080', heartbeat: '2åˆ†é’Ÿå‰', project: 'é¡¹ç›®A' },
            { id: 'edge-7', name: 'è¾¹ç¼˜èŠ‚ç‚¹A-04', type: 'edge', status: 'idle', progress: 0, cpu: 12.30, memory: '0.5GB', gpu: 0, url: 'http://192.168.1.107:8080', heartbeat: '8ç§’å‰', project: 'é¡¹ç›®A' },
            { id: 'control-3', name: 'é¡¹ç›®Aæ§åˆ¶èŠ‚ç‚¹', type: 'control', status: 'online', progress: 0, cpu: 35.60, memory: '3.2GB', gpu: 0, url: 'http://192.168.1.120:8080', heartbeat: '1ç§’å‰', project: 'é¡¹ç›®A' },
            
            // é¡¹ç›®Bçš„èŠ‚ç‚¹
            { id: 'edge-3', name: 'è¾¹ç¼˜èŠ‚ç‚¹B-01', type: 'edge', status: 'training', progress: 64, cpu: 85.40, memory: '1.5GB', gpu: 92.35, url: 'http://192.168.1.103:8080', heartbeat: '1ç§’å‰', project: 'é¡¹ç›®B' },
            { id: 'edge-8', name: 'è¾¹ç¼˜èŠ‚ç‚¹B-02', type: 'edge', status: 'training', progress: 45, cpu: 72.15, memory: '1.9GB', gpu: 88.90, url: 'http://192.168.1.108:8080', heartbeat: '4ç§’å‰', project: 'é¡¹ç›®B' },
            { id: 'edge-9', name: 'è¾¹ç¼˜èŠ‚ç‚¹B-03', type: 'edge', status: 'completed', progress: 100, cpu: 25.80, memory: '1.2GB', gpu: 15.45, url: 'http://192.168.1.109:8080', heartbeat: '7ç§’å‰', project: 'é¡¹ç›®B' },
            { id: 'control-4', name: 'é¡¹ç›®Bä¸»æ§èŠ‚ç‚¹', type: 'control', status: 'online', progress: 0, cpu: 28.90, memory: '2.8GB', gpu: 0, url: 'http://192.168.1.121:8080', heartbeat: '3ç§’å‰', project: 'é¡¹ç›®B' },
            { id: 'observer-2', name: 'é¡¹ç›®Bè§‚å¯ŸèŠ‚ç‚¹', type: 'observer', status: 'online', progress: 0, cpu: 8.75, memory: '0.8GB', gpu: 0, url: 'http://192.168.1.151:8080', heartbeat: '6ç§’å‰', project: 'é¡¹ç›®B' },
            
            // é¡¹ç›®Cçš„èŠ‚ç‚¹
            { id: 'edge-5', name: 'è¾¹ç¼˜èŠ‚ç‚¹C-01', type: 'edge', status: 'training', progress: 83, cpu: 75.90, memory: '2.3GB', gpu: 88.75, url: 'http://192.168.1.105:8080', heartbeat: '3ç§’å‰', project: 'é¡¹ç›®C' },
            { id: 'edge-10', name: 'è¾¹ç¼˜èŠ‚ç‚¹C-02', type: 'edge', status: 'training', progress: 76, cpu: 68.45, memory: '2.0GB', gpu: 85.20, url: 'http://192.168.1.110:8080', heartbeat: '2ç§’å‰', project: 'é¡¹ç›®C' },
            { id: 'edge-11', name: 'è¾¹ç¼˜èŠ‚ç‚¹C-03', type: 'edge', status: 'idle', progress: 0, cpu: 5.20, memory: '0.3GB', gpu: 0, url: 'http://192.168.1.111:8080', heartbeat: '15ç§’å‰', project: 'é¡¹ç›®C' },
            { id: 'edge-12', name: 'è¾¹ç¼˜èŠ‚ç‚¹C-04', type: 'edge', status: 'error', progress: 12, cpu: 0, memory: '0GB', gpu: 0, url: 'http://192.168.1.112:8080', heartbeat: '5åˆ†é’Ÿå‰', project: 'é¡¹ç›®C' },
            
            // ç³»ç»Ÿçº§åˆ«çš„æ§åˆ¶èŠ‚ç‚¹
            { id: 'control-1', name: 'ä¸»æ§åˆ¶èŠ‚ç‚¹-Master', type: 'control', status: 'online', progress: 0, cpu: 25.60, memory: '4.0GB', gpu: 0, url: 'http://192.168.1.100:8080', heartbeat: '1ç§’å‰', project: 'ç³»ç»Ÿ' },
            { id: 'control-2', name: 'å¤‡ç”¨æ§åˆ¶èŠ‚ç‚¹-Backup', type: 'control', status: 'online', progress: 0, cpu: 32.15, memory: '4.0GB', gpu: 0, url: 'http://192.168.1.101:8080', heartbeat: '2ç§’å‰', project: 'ç³»ç»Ÿ' },
            { id: 'control-5', name: 'åˆ†å¸ƒå¼æ§åˆ¶èŠ‚ç‚¹-01', type: 'control', status: 'online', progress: 0, cpu: 18.75, memory: '3.5GB', gpu: 0, url: 'http://192.168.1.122:8080', heartbeat: '4ç§’å‰', project: 'ç³»ç»Ÿ' },
            
            // ç›‘æ§ç³»ç»Ÿ
            { id: 'observer-1', name: 'å…¨å±€ç›‘æ§èŠ‚ç‚¹', type: 'observer', status: 'online', progress: 0, cpu: 12.45, memory: '1.0GB', gpu: 0, url: 'http://192.168.1.150:8080', heartbeat: '5ç§’å‰', project: 'ç›‘æ§' },
            { id: 'observer-3', name: 'æ€§èƒ½ç›‘æ§èŠ‚ç‚¹', type: 'observer', status: 'online', progress: 0, cpu: 15.30, memory: '1.2GB', gpu: 0, url: 'http://192.168.1.152:8080', heartbeat: '3ç§’å‰', project: 'ç›‘æ§' },
            { id: 'observer-4', name: 'æ—¥å¿—æ”¶é›†èŠ‚ç‚¹', type: 'observer', status: 'online', progress: 0, cpu: 22.80, memory: '2.5GB', gpu: 0, url: 'http://192.168.1.153:8080', heartbeat: '1ç§’å‰', project: 'ç›‘æ§' },
            
            // æœªåˆ†é…çš„èŠ‚ç‚¹
            { id: 'edge-4', name: 'å¾…åˆ†é…è¾¹ç¼˜èŠ‚ç‚¹-01', type: 'edge', status: 'idle', progress: 0, cpu: 15.25, memory: '0.8GB', gpu: 0, url: 'http://192.168.1.104:8080', heartbeat: '10ç§’å‰', project: 'æœªåˆ†é…' },
            { id: 'edge-13', name: 'å¾…åˆ†é…è¾¹ç¼˜èŠ‚ç‚¹-02', type: 'edge', status: 'idle', progress: 0, cpu: 8.90, memory: '0.5GB', gpu: 0, url: 'http://192.168.1.113:8080', heartbeat: '12ç§’å‰', project: 'æœªåˆ†é…' },
            { id: 'edge-14', name: 'æ–°æ¥å…¥è¾¹ç¼˜èŠ‚ç‚¹', type: 'edge', status: 'idle', progress: 0, cpu: 3.45, memory: '0.2GB', gpu: 0, url: 'http://192.168.1.114:8080', heartbeat: '20ç§’å‰', project: 'æœªåˆ†é…' },
            
            // ç ”å‘é¡¹ç›®Dï¼ˆæ–°é¡¹ç›®ï¼‰
            { id: 'edge-15', name: 'ç ”å‘èŠ‚ç‚¹D-01', type: 'edge', status: 'training', progress: 15, cpu: 55.20, memory: '1.6GB', gpu: 72.80, url: 'http://192.168.1.115:8080', heartbeat: '6ç§’å‰', project: 'é¡¹ç›®D' },
            { id: 'edge-16', name: 'ç ”å‘èŠ‚ç‚¹D-02', type: 'edge', status: 'training', progress: 28, cpu: 61.75, memory: '1.8GB', gpu: 79.35, url: 'http://192.168.1.116:8080', heartbeat: '4ç§’å‰', project: 'é¡¹ç›®D' },
            { id: 'control-6', name: 'é¡¹ç›®Dåè°ƒèŠ‚ç‚¹', type: 'control', status: 'online', progress: 0, cpu: 42.60, memory: '3.0GB', gpu: 0, url: 'http://192.168.1.123:8080', heartbeat: '2ç§’å‰', project: 'é¡¹ç›®D' },
        ];

        let filteredNodes = [...allNodes];

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            // ç­‰å¾…ä¸€ç‚¹æ—¶é—´ç¡®ä¿æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆï¼Œç„¶ååº”ç”¨ç¿»è¯‘
            setTimeout(() => {
                if (window.i18nManager) {
                    window.i18nManager.applyTranslations();
                }
            }, 100);
            updateStats();
            renderTable();
            setupEventListeners();
        });

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const online = allNodes.filter(n => ['training', 'completed', 'online'].includes(n.status)).length;
            const training = allNodes.filter(n => n.status === 'training').length;
            const idle = allNodes.filter(n => n.status === 'idle').length;
            const error = allNodes.filter(n => n.status === 'error').length;

            document.getElementById('onlineCount').textContent = online;
            document.getElementById('trainingCount').textContent = training;
            document.getElementById('idleCount').textContent = idle;
            document.getElementById('errorCount').textContent = error;
        }

        // æŒ‰é¡¹ç›®åˆ†ç»„æ¸²æŸ“èŠ‚ç‚¹
        function renderTable() {
            const container = document.getElementById('projectsContainer');
            
            // æŒ‰é¡¹ç›®åˆ†ç»„èŠ‚ç‚¹
            const nodesByProject = {};
            filteredNodes.forEach(node => {
                if (!nodesByProject[node.project]) {
                    nodesByProject[node.project] = [];
                }
                nodesByProject[node.project].push(node);
            });

            // ç”Ÿæˆé¡¹ç›®åˆ†ç»„HTML
            const projectsHtml = Object.keys(nodesByProject).map(projectName => {
                const projectNodes = nodesByProject[projectName];
                
                // æŒ‰èŠ‚ç‚¹ç±»å‹åˆ†ç»„ï¼ˆæ§åˆ¶èŠ‚ç‚¹å’Œè§‚å¯ŸèŠ‚ç‚¹åœ¨ä¸Šï¼Œè®­ç»ƒèŠ‚ç‚¹åœ¨ä¸‹ï¼‰
                const nodesByType = {
                    control: projectNodes.filter(n => n.type === 'control'),
                    observer: projectNodes.filter(n => n.type === 'observer'),
                    edge: projectNodes.filter(n => n.type === 'edge')
                };

                // ç”ŸæˆèŠ‚ç‚¹ç±»å‹åˆ†ç»„HTML
                const nodeTypeSections = Object.keys(nodesByType).map(nodeType => {
                    const nodes = nodesByType[nodeType];
                    if (nodes.length === 0) return '';

                    const typeText = getTypeText(nodeType);
                    const sectionClass = `${nodeType === 'edge' ? 'training' : nodeType}-nodes-section`;
                    
                    const nodesHtml = nodes.map(node => renderNodeCard(node)).join('');

                    return `
                        <div class="node-type-section ${sectionClass}">
                            <div class="node-type-header">
                                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    ${getTypeIcon(nodeType)}
                                </svg>
                                ${typeText} (${nodes.length}ä¸ª)
                            </div>
                            <div class="space-y-3">
                                ${nodesHtml}
                            </div>
                        </div>
                    `;
                }).filter(html => html !== '').join('');

                return `
                    <div class="project-group">
                        <div class="project-header">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900 mb-1">${projectName}</h3>
                                    <p class="text-sm text-gray-600">å…± ${projectNodes.length} ä¸ªèŠ‚ç‚¹</p>
                                </div>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getProjectBadgeClass(projectName)}">
                                    ${projectName}
                                </span>
                            </div>
                        </div>
                        ${nodeTypeSections}
                    </div>
                `;
            }).join('');

            container.innerHTML = projectsHtml || '<div class="text-center text-gray-500 py-8">æš‚æ— èŠ‚ç‚¹æ•°æ®</div>';
        }

        // æ¸²æŸ“å•ä¸ªèŠ‚ç‚¹å¡ç‰‡
        function renderNodeCard(node) {
            const nodeCardClass = `node-card ${node.type}-node-card`;
            
            return `
                <div class="${nodeCardClass}">
                    <div class="flex items-center gap-4" style="width: fit-content !important; display: inline-flex !important;">
                        <input type="checkbox" class="node-checkbox rounded border-gray-300 text-blue-600 focus:ring-blue-500 flex-shrink-0" value="${node.id}">
                        
                        <div class="flex items-center flex-shrink-0 gap-3">
                            <div class="w-3 h-3 ${getStatusColor(node.status)} rounded-full"></div>
                            <div style="width: 280px;">
                                <h4 class="font-semibold text-gray-900">${node.name}</h4>
                                <p class="text-sm text-gray-500 font-mono">${node.url}</p>
                            </div>
                        </div>

                        <div class="text-center w-20 flex-shrink-0">
                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(node.status)}">
                                ${getStatusText(node.status)}
                            </span>
                        </div>
                        
                        <div class="text-center w-16 flex-shrink-0">
                            <div class="text-xs text-gray-500 mb-1">CPU</div>
                            <div class="font-semibold">${node.cpu.toFixed(1)}%</div>
                        </div>
                        
                        <div class="text-center w-16 flex-shrink-0">
                            <div class="text-xs text-gray-500 mb-1">å†…å­˜</div>
                            <div class="font-semibold">${node.memory}</div>
                        </div>
                        
                        <div class="text-center w-16 flex-shrink-0">
                            <div class="text-xs text-gray-500 mb-1">GPU</div>
                            <div class="font-semibold">${node.gpu ? node.gpu.toFixed(1) + '%' : '-'}</div>
                        </div>
                        
                        <div class="text-center w-32 flex-shrink-0">
                            <div class="text-xs text-gray-500 mb-1">è¿›åº¦</div>
                            ${(node.status === 'training' || node.status === 'completed') ? `
                                <div class="flex items-center justify-center">
                                    <div class="w-20 bg-gray-200 rounded-full h-2 mr-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${node.progress}%"></div>
                                    </div>
                                    <span class="text-xs font-semibold">${node.progress}%</span>
                                </div>
                            ` : `<div class="font-semibold">-</div>`}
                        </div>

                        <div class="text-center w-16 flex-shrink-0">
                            <div class="text-xs text-gray-500 mb-1">å¿ƒè·³</div>
                            <div class="font-semibold text-xs">${node.heartbeat}</div>
                        </div>

                        <div class="flex gap-2 flex-shrink-0">
                            <button onclick="viewNodeDetails('${node.id}')" class="px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors font-medium whitespace-nowrap">
                                è¯¦æƒ…
                            </button>
                            <button onclick="manageNode('${node.id}')" class="px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors font-medium whitespace-nowrap">
                                ç®¡ç†
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // è·å–èŠ‚ç‚¹ç±»å‹å›¾æ ‡
        function getTypeIcon(type) {
            const icons = {
                'edge': '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>',
                'control': '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>',
                'observer': '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>'
            };
            return icons[type] || icons['edge'];
        }

        // è·å–çŠ¶æ€é¢œè‰²
        function getStatusColor(status) {
            const colors = {
                'training': 'bg-blue-500',
                'completed': 'bg-green-500',
                'idle': 'bg-gray-400',
                'error': 'bg-red-500',
                'online': 'bg-green-500'
            };
            return colors[status] || 'bg-gray-400';
        }

        // è·å–ç±»å‹æ ‡ç­¾æ ·å¼
        function getTypeBadgeClass(type) {
            const classes = {
                'edge': 'type-badge-edge',
                'control': 'type-badge-control',
                'observer': 'type-badge-observer'
            };
            return classes[type] || 'type-badge-observer';
        }

        // è·å–é¡¹ç›®æ ‡ç­¾æ ·å¼
        function getProjectBadgeClass(project) {
            const classes = {
                'é¡¹ç›®A': 'project-badge-a',
                'é¡¹ç›®B': 'project-badge-b', 
                'é¡¹ç›®C': 'project-badge-c',
                'é¡¹ç›®D': 'project-badge-system',
                'ç³»ç»Ÿ': 'project-badge-system',
                'ç›‘æ§': 'project-badge-monitor',
                'æœªåˆ†é…': 'project-badge-unassigned'
            };
            return classes[project] || 'project-badge-unassigned';
        }

        // è·å–çŠ¶æ€æ ‡ç­¾æ ·å¼
        function getStatusBadgeClass(status) {
            const classes = {
                'training': 'bg-blue-100 text-blue-800',
                'completed': 'bg-green-100 text-green-800',
                'idle': 'bg-gray-100 text-gray-800',
                'error': 'bg-red-100 text-red-800',
                'online': 'bg-green-100 text-green-800'
            };
            return classes[status] || 'bg-gray-100 text-gray-800';
        }

        // è·å–ç±»å‹æ–‡æœ¬
        function getTypeText(type) {
            const texts = {
                'edge': 'è¾¹ç¼˜èŠ‚ç‚¹',
                'control': 'æ§åˆ¶èŠ‚ç‚¹',
                'observer': 'è§‚å¯ŸèŠ‚ç‚¹'
            };
            return texts[type] || 'æœªçŸ¥';
        }

        // è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(status) {
            const texts = {
                'training': 'è®­ç»ƒä¸­',
                'completed': 'å·²å®Œæˆ',
                'idle': 'ç©ºé—²',
                'error': 'æ•…éšœ',
                'online': 'åœ¨çº¿'
            };
            return texts[status] || 'æœªçŸ¥';
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // æœç´¢åŠŸèƒ½
            document.getElementById('searchInput').addEventListener('input', filterNodes);
            document.getElementById('statusFilter').addEventListener('change', filterNodes);
            document.getElementById('typeFilter').addEventListener('change', filterNodes);
            document.getElementById('projectFilter').addEventListener('change', filterNodes);

        }

        // è¿‡æ»¤èŠ‚ç‚¹
        function filterNodes() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const projectFilter = document.getElementById('projectFilter').value;

            filteredNodes = allNodes.filter(node => {
                const matchSearch = !search || 
                    node.name.toLowerCase().includes(search) || 
                    node.url.toLowerCase().includes(search);
                const matchStatus = !statusFilter || node.status === statusFilter;
                const matchType = !typeFilter || node.type === typeFilter;
                const matchProject = !projectFilter || node.project === projectFilter;

                return matchSearch && matchStatus && matchType && matchProject;
            });

            renderTable();
        }



        // æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…
        function viewNodeDetails(nodeId) {
            const node = allNodes.find(n => n.id === nodeId);
            const modal = document.getElementById('nodeDetailsModal');
            const modalTitle = document.getElementById('modalNodeTitle');
            const modalInfo = document.getElementById('modalNodeInfo');
            
            modalTitle.textContent = `${node.name} - è¯¦æƒ…`;
            
            const statusColor = {
                training: 'text-blue-600',
                completed: 'text-green-600',
                idle: 'text-gray-600',
                error: 'text-red-600'
            }[node.status];
            
            const statusText = {
                training: 'è®­ç»ƒä¸­',
                completed: 'å·²å®Œæˆ',
                idle: 'ç©ºé—²',
                error: 'é”™è¯¯'
            }[node.status];
            
            modalInfo.innerHTML = `
                <div class="space-y-3">
                    <!-- åŸºç¡€ä¿¡æ¯å¡ç‰‡ -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <h5 class="font-semibold mb-2 text-blue-600 text-sm">åŸºç¡€ä¿¡æ¯</h5>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <span class="text-xs text-gray-600">èŠ‚ç‚¹ç±»å‹</span>
                                <div class="font-semibold">è¾¹ç¼˜èŠ‚ç‚¹</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">çŠ¶æ€</span>
                                <div class="font-semibold ${statusColor}">${statusText}</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">è®­ç»ƒè¿›åº¦</span>
                                <div class="font-semibold text-blue-600">${node.progress}%</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">æœ€åå¿ƒè·³</span>
                                <div class="font-semibold">åˆšåˆš</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç½‘ç»œä¿¡æ¯å¡ç‰‡ -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <h5 class="font-semibold mb-2 text-purple-600 text-sm">ç½‘ç»œä¿¡æ¯</h5>
                        <div class="space-y-1">
                            <div>
                                <span class="text-xs text-gray-600">èŠ‚ç‚¹åœ°å€</span>
                                <div class="font-mono text-sm text-blue-600">${node.url || 'http://192.168.1.xxx:8080'}</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">è¿æ¥çš„æ§åˆ¶èŠ‚ç‚¹</span>
                                <div class="font-semibold">Control-Node-Master</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">ç½‘ç»œå»¶è¿Ÿ</span>
                                <div class="font-semibold text-green-600">12ms</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ€§èƒ½ä¿¡æ¯å¡ç‰‡ -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <h5 class="font-semibold mb-2 text-orange-600 text-sm">æ€§èƒ½ä¿¡æ¯</h5>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <span class="text-xs text-gray-600">CPUä½¿ç”¨ç‡</span>
                                <div class="font-semibold">${Math.floor(Math.random() * 40) + 20}%</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">å†…å­˜ä½¿ç”¨ç‡</span>
                                <div class="font-semibold">${Math.floor(Math.random() * 30) + 35}%</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">GPUä½¿ç”¨ç‡</span>
                                <div class="font-semibold">${Math.floor(Math.random() * 60) + 20}%</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">ç£ç›˜ä½¿ç”¨ç‡</span>
                                <div class="font-semibold">${Math.floor(Math.random() * 25) + 15}%</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è®­ç»ƒç»Ÿè®¡å¡ç‰‡ -->
                    <div class="bg-gray-50 rounded-lg p-3">
                        <h5 class="font-semibold mb-2 text-green-600 text-sm">è®­ç»ƒç»Ÿè®¡</h5>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <span class="text-xs text-gray-600">å®Œæˆè½®æ¬¡</span>
                                <div class="font-semibold">${Math.floor(node.progress / 10)}</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">æ€»è½®æ¬¡</span>
                                <div class="font-semibold">10</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">å¹³å‡æŸå¤±</span>
                                <div class="font-semibold">${(Math.random() * 0.5 + 0.1).toFixed(4)}</div>
                            </div>
                            <div>
                                <span class="text-xs text-gray-600">å‡†ç¡®ç‡</span>
                                <div class="font-semibold">${(Math.random() * 0.2 + 0.75).toFixed(3)}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }
        
        // å…³é—­èŠ‚ç‚¹è¯¦æƒ…æ¨¡æ€æ¡†
        function closeNodeDetailsModal() {
            const modal = document.getElementById('nodeDetailsModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // ç®¡ç†èŠ‚ç‚¹
        let currentManagedNodeId = null;

        function manageNode(nodeId) {
            const node = allNodes.find(n => n.id === nodeId);
            currentManagedNodeId = nodeId;
            
            const modal = document.getElementById('nodeManageModal');
            const modalTitle = document.getElementById('manageModalTitle');
            const modalDescription = document.getElementById('manageModalDescription');
            
            modalTitle.textContent = `ç®¡ç† ${node.name}`;
            modalDescription.textContent = `é€‰æ‹©å¯¹ ${node.name} è¦æ‰§è¡Œçš„æ“ä½œï¼š`;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeNodeManageModal() {
            const modal = document.getElementById('nodeManageModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            currentManagedNodeId = null;
        }

        function executeAction(actionType) {
            const node = allNodes.find(n => n.id === currentManagedNodeId);
            const actionNames = {
                'startTraining': 'å¯åŠ¨è®­ç»ƒ',
                'stopTraining': 'åœæ­¢è®­ç»ƒ', 
                'restart': 'é‡å¯èŠ‚ç‚¹',
                'delete': 'åˆ é™¤èŠ‚ç‚¹'
            };
            
            const actionName = actionNames[actionType];
            
            // å…³é—­æ¨¡æ€æ¡†
            closeNodeManageModal();
            
            // æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€
            const statusDiv = document.createElement('div');
            statusDiv.className = 'fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg z-50';
            statusDiv.textContent = `æ­£åœ¨æ‰§è¡Œï¼š${actionName}`;
            document.body.appendChild(statusDiv);
            
            // æ¨¡æ‹Ÿæ‰§è¡Œè¿‡ç¨‹
            setTimeout(() => {
                statusDiv.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50';
                statusDiv.textContent = `${actionName} æ‰§è¡ŒæˆåŠŸï¼`;
                
                // 2ç§’åç§»é™¤æç¤º
                setTimeout(() => {
                    statusDiv.remove();
                }, 2000);
                
                // æ›´æ–°èŠ‚ç‚¹çŠ¶æ€ï¼ˆç¤ºä¾‹ï¼‰
                if (actionType === 'startTraining') {
                    node.status = 'training';
                } else if (actionType === 'stopTraining') {
                    node.status = 'idle';
                }
                
                updateStats();
                renderTable();
            }, 1500);
        }

        // æ·»åŠ èŠ‚ç‚¹åŠŸèƒ½å·²ç§»é™¤ï¼ˆåœ¨å…¶ä»–é¡µé¢è¿›è¡ŒèŠ‚ç‚¹æ·»åŠ ï¼‰

        // åˆ·æ–°èŠ‚ç‚¹
        function refreshNodes() {
            alert('æ­£åœ¨åˆ·æ–°èŠ‚ç‚¹çŠ¶æ€...');
            setTimeout(() => {
                updateStats();
                renderTable();
                alert('èŠ‚ç‚¹çŠ¶æ€å·²åˆ·æ–°ï¼');
            }, 1000);
        }

        // æ‰¹é‡å¯åŠ¨
        function batchStart() {
            const selected = getSelectedNodes();
            if (selected.length === 0) {
                alert('è¯·é€‰æ‹©è¦æ“ä½œçš„èŠ‚ç‚¹');
                return;
            }
            alert(`æ­£åœ¨å¯åŠ¨ ${selected.length} ä¸ªèŠ‚ç‚¹çš„è®­ç»ƒ...`);
        }

        // æ‰¹é‡åœæ­¢
        function batchStop() {
            const selected = getSelectedNodes();
            if (selected.length === 0) {
                alert('è¯·é€‰æ‹©è¦æ“ä½œçš„èŠ‚ç‚¹');
                return;
            }
            alert(`æ­£åœ¨åœæ­¢ ${selected.length} ä¸ªèŠ‚ç‚¹çš„è®­ç»ƒ...`);
        }

        // è·å–é€‰ä¸­çš„èŠ‚ç‚¹
        function getSelectedNodes() {
            const checkboxes = document.querySelectorAll('.node-checkbox:checked');
            return Array.from(checkboxes).map(cb => cb.value);
        }

        // è‡ªå®šä¹‰è¿”å›å¯¼èˆªåŠŸèƒ½
        function navigateBack() {
            // æ£€æŸ¥æ˜¯å¦æœ‰å†å²è®°å½•å¯ä»¥è¿”å›
            if (window.history.length > 1 && document.referrer) {
                // å¦‚æœæœ‰å¼•èé¡µé¢ä¸”ä¸æ˜¯åŒä¸€ä¸ªé¡µé¢ï¼Œå°±è¿”å›
                const referrerUrl = new URL(document.referrer);
                const currentUrl = new URL(window.location.href);
                if (referrerUrl.pathname !== currentUrl.pathname) {
                    window.history.back();
                    return;
                }
            }
            
            // å¦åˆ™å¯¼èˆªåˆ°EdgeAIä¸»é¡µé¢
            window.location.href = '/edgeai/pages/dashboard.html';
        }
    </script>
</body>
</html>